<ion-content #scrollMe>
  <div class="container" style="margin-bottom: 200px !important;">
    <div class="Slot-detail" [ngClass]="{'m-3': !smallScreen}" *ngIf="storeDetail && serviceDetail">
      <owl-carousel-o
  *ngIf="serviceDetail.gallery && serviceDetail.gallery.length"
  [options]="galleryCarouselOptions"
  class="branch-carousel"
  [ngClass]="{ 'carousel-200': smallScreen }"
>
  <ng-container *ngFor="let item of serviceDetail.gallery; let i = index">
    <ng-template carouselSlide>
      <div class="carousel-cell" (click)="openCarouselInModal(i, serviceDetail.gallery)">
        <img [src]="item.path" style="object-fit: cover;" />
      </div>
    </ng-template>
  </ng-container>
</owl-carousel-o>


      <div class="_g9yb1m">
        <div class="_16e70jgn">
          <div>
            <div class="_1gw6tte border-top" style="border-top-color: #DDDDDD;">
              <div style="--gp-section-max-width:1128px;">
                <div class="_npr0qi" style="border-top-color: rgb(221, 221, 221);"></div>
                <div data-plugin-in-point-id="OVERVIEW_DEFAULT" data-section-id="OVERVIEW_DEFAULT"
                  style="padding-top: 2rem; padding-bottom: 8px;">
                  <section>
                    <div class="_jro6t0 d-flex">
                      <div class="_tqmy57">
                        <div class="_svr7sj">
                          <h1 tabindex="-1" class="_14i3z6h">{{ storeDetail?.name }}</h1>
                          <span>{{ storeDetail?.address }}</span>
                        </div>
                      </div>
                    </div>
                  </section>
                </div>
              </div>
            </div>
            <div class="_1gw6tte border-bottom" *ngIf="storeDetail.formattedAddress" style="border-bottom-color: #DDDDDD;">
              <div style="--gp-section-max-width:1128px;">
                <div data-plugin-in-point-id="HIGHLIGHTS_DEFAULT" data-section-id="HIGHLIGHTS_DEFAULT"
                  style="padding-bottom: 2rem;">
                  <div class="_vciz77 row">
                    <div class="_1963neo col-6 mt-3 d-flex align-items-center">
                      <div class="mr-2"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"
                          aria-label="Duration" role="img" focusable="false"
                          style="display: block; height: 20px; width: 20px; fill: currentcolor;">
                          <path
                            d="M16 1c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15-8.284 0-15-6.716-15-15C1 7.716 7.716 1 16 1zm0 2C8.82 3 3 8.82 3 16s5.82 13 13 13 13-5.82 13-13S23.18 3 16 3zm0 22a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm-5-1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm10 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM17.08 5.104v10.421l9.026 5.213-1 1.732-10.027-5.79V5.105zM7.5 20a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM6 15a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm20 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM7.5 10a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm17 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2zM11 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm10 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z">
                          </path>
                        </svg></div>
                      <div class="_bor8vu">{{ storeDetail.formattedAddress ? storeDetail.formattedAddress : '-' }}</div>
                    </div>
                    <!-- <div class="_1963neo col-6 mt-3 d-flex align-items-center">
                      <div class="mr-2"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"
                          aria-label="Group size" role="img" focusable="false"
                          style="display: block; height: 32px; width: 32px; fill: currentcolor;">
                          <path
                            d="m22 7c2.7614237 0 5 2.23857625 5 5 0 1.4483542-.6158223 2.7528755-1.5999105 3.6660075 3.2075261 1.3080072 5.4902937 4.4154553 5.5960734 8.0686302l.0038371.2653623h-2c0-3.5261219-2.6071882-6.4433024-5.9989899-6.9289666l-.0001094-2.2420576c1.1647219-.4120906 1.9990993-1.5230936 1.9990993-2.8289758 0-1.6568542-1.3431458-3-3-3-1.5976809 0-2.9036609 1.24892-2.9949073 2.8237272l-.0050927.1762728.0819616.0625271c1.1677123.9152829 1.9180384 2.3387539 1.9180384 3.9374729 0 1.4479059-.615441 2.7520678-1.5989966 3.6651593 3.207085 1.309499 5.4893907 4.4166818 5.5951595 8.0694784l.0038371.2653623h-2c0-3.5261219-2.6071882-6.4433024-5.9989899-6.9289666l-.0001094-2.2420576c1.1647219-.4120906 1.9990993-1.5230936 1.9990993-2.8289758 0-1.6568542-1.3431458-3-3-3s-3 1.3431458-3 3c0 1.3062521.8348501 2.4175144 2.0000889 2.8293257l-.0000889 2.2415643c-3.3148214.4741509-5.8804754 3.2706475-5.99594098 6.6884602l-.00405902.2406498h-2c0-3.7671593 2.31452169-6.9937332 5.5991096-8.335266-.9836686-.9126662-1.5991096-2.2168281-1.5991096-3.664734 0-1.598719.7503261-3.02219 1.9180384-3.9374729l.0819616-.0625271c0-1.6568542-1.3431458-3-3-3-1.65685425 0-3 1.3431458-3 3 0 1.3062521.8348501 2.4175144 2.00008893 2.8293257l-.00008893 2.2415643c-3.31482137.4741509-5.8804754 3.2706475-5.99594098 6.6884602l-.00405902.2406498h-2c0-3.7671593 2.31452169-6.9937332 5.5991096-8.335266-.98366859-.9126662-1.5991096-2.2168281-1.5991096-3.664734 0-2.76142375 2.23857625-5 5-5 2.4601119 0 4.505252 1.77670575 4.9222714 4.1169685.3461998-.0766772.707259-.1169685 1.0777286-.1169685s.7315288.0402913 1.0790344.1167309c.4156259-2.33994891 2.4608009-4.1167309 4.9209656-4.1167309z">
                          </path>
                        </svg></div>
                      <div class="_bor8vu">Up to 10 people. Private groups available for up to 30</div>
                    </div>
                    <div class="_1963neo col-6 mt-3 d-flex align-items-center">
                      <div class="mr-2"><svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"
                          role="presentation" focusable="false"
                          style="display: block; height: 32px; width: 32px; fill: currentcolor;">
                          <path
                            d="M26 3a5 5 0 0 1 4.995 4.783L31 8v12a5 5 0 0 1-4.783 4.995L26 25h-5v2h2v2H9v-2h2v-2H6a5 5 0 0 1-4.995-4.783L1 20V8a5 5 0 0 1 4.783-4.995L6 3zm-7 22h-6v2h6zm7-20H6a3 3 0 0 0-2.995 2.824L3 8v12a3 3 0 0 0 2.824 2.995L6 23h20a3 3 0 0 0 2.995-2.824L29 20V8a3 3 0 0 0-3-3zM5 11c5.43 0 9.848 4.327 9.996 9.72L15 21h-2a8 8 0 0 0-7.75-7.996L5 13zm0 4a6 6 0 0 1 5.996 5.775L11 21H9a4 4 0 0 0-3.8-3.995L5 17zm0 4a2 2 0 0 1 1.995 1.85L7 21H5z">
                          </path>
                        </svg></div>
                      <div class="_bor8vu">Join from your computer, phone, or tablet</div>
                    </div>
                    <div class="_1963neo col-6 mt-3 d-flex align-items-center">
                      <div class="mr-2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" aria-hidden="true"
                          role="presentation" focusable="false"
                          style="display: block; height: 32px; width: 32px; fill: currentcolor;">
                          <path
                            d="M16.00049,31.0791,11.84326,26H6a5.00588,5.00588,0,0,1-5-5V7A5.00588,5.00588,0,0,1,6,2H26a5.00588,5.00588,0,0,1,5,5V21a5.00588,5.00588,0,0,1-5,5H20.1543ZM6,4A3.00328,3.00328,0,0,0,3,7V21a3.00328,3.00328,0,0,0,3,3h6.79053l3.209,3.9209L19.207,24H26a3.00328,3.00328,0,0,0,3-3V7a3.00328,3.00328,0,0,0-3-3Z">
                          </path>
                        </svg></div>
                      <div class="_bor8vu">Hosted in English, Japanese</div>
                    </div> -->
                  </div>
                </div>
              </div>
            </div>
            <div class="_1gw6tte" *ngIf="storeDetail?.description">
              <div style="--gp-section-max-width:1128px;">
                <div class="_npr0qi" style="border-top-color: rgb(221, 221, 221);"></div>
                <div data-plugin-in-point-id="DESCRIPTION_DEFAULT" data-section-id="DESCRIPTION_DEFAULT"
                  style="padding-top: 1rem; padding-bottom: 1rem;">
                  <div class="_152qbzi">
                    <section>
                      <div>
                        <ion-label class="book-appointment-slots-title">Description</ion-label>
                      </div>
                      <!-- <h1 tabindex="-1" class="_14i3z6h">
                        <div class="_1muy8yf" aria-hidden="false">Description</div>
                      </h1> -->
                    </section>
                  </div>
                  <span>
                    <div class="_cfvh61">
                      <div class="_1xib9m0">
                        <span [innerHtml]="storeDetail?.description | safe: 'html'"></span>
                      </div>
                    </div>
                  </span>
                </div>
              </div>
            </div>
            <section class="book-appointment-row" *ngIf="(serviceDetail && !serviceDetail.storePageAsBlog && !serviceDetail.bookingEngine)">
              <div class="book-appointment-slots-container" *ngIf="storeDetail && storeDetail.listOfSlots">
                <div class="d-flex align-items-center justify-content-center flex-column" style="margin-top: 24px"
                  *ngIf="serviceDetail.checkinForm">
                  <web-checkin-form [invalidFlags]="invalidFlags" [submit]="submit" [webCheckin]="webCheckin">
                  </web-checkin-form>
                </div>
                <div class="w-100 h-100" [ngClass]="{'d-flex justify-content-center align-items-center' : !smallScreen}" style="margin-top: 24px" *ngIf="serviceDetail.menuImgs && serviceDetail.menuImgs.length">
                  <div class="text-center">
                    <ion-button *ngIf="!showMenu" (click)="toggleMenu()">Menu</ion-button>
                  </div>
                  <div class="menu-slider position-relative" [ngStyle]="smallScreen && {'width': '100% !important'}" *ngIf="showMenu">
                    <span style="position: absolute;right: 0px;">
                      <ion-icon name="close" (click)="toggleMenu()"></ion-icon>
                    </span>
                    <div class="w-100 h-100 position-relative" style="z-index: 1;">
<owl-carousel-o 
  class="branch-carousel"
  *ngIf="serviceDetail.menuImgs && serviceDetail.menuImgs.length"
  [options]="menuCarouselOptions">

  <ng-template carouselSlide *ngFor="let item of serviceDetail.menuImgs; let i = index">
    <div class="carousel-cell" (click)="openCarouselInModal(i, serviceDetail.menuImgs)">
      <img [src]="item.path" style="object-fit: cover; height: 400px; width: 100%;">
    </div>
  </ng-template>
</owl-carousel-o>
                    </div>
                  </div>
                </div>
                <div style="margin-top: 24px">
                  <ion-label class="book-appointment-slots-title" >{{ serviceDetail.textAreaLabel ? serviceDetail.textAreaLabel : 'Request Summary' }}</ion-label>
                </div>
                <div *ngIf="serviceDetail?.showTextarea"
                  style="border: 1px solid #00000047; margin-top: 8px;margin-bottom: 24px;border-radius: 12px;">
                  <ion-textarea [placeholder]="serviceDetail?.placeholder" [(ngModel)]="comments"></ion-textarea>
                </div>
                <ion-item lines="none">
                  <ion-label class="ion-text-wrap mb-0 book-appointment-slots-title">{{ serviceDetail?.headerText ?
                    serviceDetail?.headerText : 'Book a slot'}}</ion-label>
                </ion-item>
                <div class="slots-selection-container">
                  <div class="date-selection">
                    <ion-button (click)="selectPreviousDate()" fill="clear" size="small" [disabled]="isTodayCheck()">
                      <ion-icon slot="icon-only" name="chevron-back-sharp"></ion-icon>
                    </ion-button>
                    <ion-label class="slots-showing-day">{{ selectedDate | date:'fullDate'}}</ion-label>
                    <ion-button (click)="selectNextDate()" fill="clear" size="small">
                      <ion-icon slot="icon-only" name="chevron-forward-sharp"></ion-icon>
                    </ion-button>
                  </div>
                  <div class="available-slots-container" *ngIf="storeDetail.listOfSlots && storeDetail.listOfSlots.length > 0">
                    <div class="slots">
                      <ng-container *ngFor="let slot of storeDetail.listOfSlots; let i=index">
                        <ion-button [disabled]="slot.isOccupied || slot.emptySlots <=0 " class="slot" size="small" fill="outline"
                          [ngClass]="{'active': selectedSlot ? (slot.slotTime === selectedSlot.slotTime) : false }"
                          (click)="onSlotSelection(slot)">{{slot.slotTime }}</ion-button>
                      </ng-container>
                    </div>
                  </div>
                </div>
                <div *ngIf="(!storeDetail.listOfSlots || (storeDetail.listOfSlots && storeDetail.listOfSlots.length === 0))">
                  <ion-label class="ion-text-wrap error-message text-center mt-3"> No slots avaiable for this date</ion-label>
                </div>
                <div class="slots-button-container container">
                  <ion-button size="default" class="slot-confirmation-btn" tappable (click)="bookSlot()">
                    <span class="mr-1">{{ serviceDetail?.confirmBtnLabel ? serviceDetail?.confirmBtnLabel : 'Confirm My Slot'}}</span>
                    <!-- <ion-icon name="arrow-forward-circle-sharp"></ion-icon> -->
                  </ion-button>
                </div>
              </div>
            </section>
            <section class="book-appointment-row booking-engine" *ngIf="(serviceDetail && serviceDetail.bookingEngine)">
              <div class="book-appointment-slots-container" *ngIf="storeDetail && storeDetail.listOfSlots">
                <div class="d-flex align-items-center justify-content-center flex-column" style="margin-top: 24px"
                  *ngIf="serviceDetail.checkinForm">
                  <web-checkin-form [invalidFlags]="invalidFlags" [submit]="submit" [webCheckin]="webCheckin">
                  </web-checkin-form>
                </div>
                <div class="w-100 h-100" [ngClass]="{'d-flex justify-content-center align-items-center' : !smallScreen}" style="margin-top: 24px" *ngIf="serviceDetail.menuImgs && serviceDetail.menuImgs.length">
                  <div class="text-center">
                    <ion-button *ngIf="!showMenu" (click)="toggleMenu()">Menu</ion-button>
                  </div>
                  <div class="menu-slider position-relative" [ngStyle]="smallScreen && {'width': '100% !important'}" *ngIf="showMenu">
                    <span style="position: absolute;right: 0px;">
                      <ion-icon name="close" (click)="toggleMenu()"></ion-icon>
                    </span>
                    <div class="w-100 h-100 position-relative" style="z-index: 1;">
<owl-carousel-o [options]="menuCarouselOptions" *ngIf="serviceDetail.menuImgs?.length">
  <ng-container *ngFor="let item of serviceDetail.menuImgs; let i = index">
    <ng-template carouselSlide>
      <div class="carousel-cell" (click)="openCarouselInModal(i, serviceDetail.menuImgs)">
        <img [src]="item.path" style="object-fit: cover; width: 100%; height: 400px;" />
      </div>
    </ng-template>
  </ng-container>
</owl-carousel-o>
                    </div>
                  </div>
                </div>
                <ion-item lines="none">
                  <ion-label class="ion-text-wrap mb-0 book-appointment-slots-title">{{ serviceDetail?.headerText ?
                    serviceDetail?.headerText : 'Book a slot'}}</ion-label>
                </ion-item>
                <div class="slots-selection-container">
                  <ion-item class="text-center">
                    <!-- <ion-label>Check In</ion-label> -->
                    <ion-datetime class="w-100" name="checkinDate" placeholder="Please select Date" (ngModelChange)="onDateChange($event)" [value]="selectedDate" displayFormat="DD/MM/YYYY" [(ngModel)]="selectedDate"></ion-datetime>
                  </ion-item>
                  <div class="date-selection">
                    <ion-button (click)="selectPrevWeek()" fill="clear" size="small" [disabled]="isTodayCheck()">
                      <ion-icon slot="icon-only" name="chevron-back-sharp"></ion-icon>
                    </ion-button>
                    <ion-label class="slots-showing-day" *ngFor="let storeDetail of multiDateStoreDetail">
                      <div class="Day-heading text-center" (click)="changeSelectedDate(storeDetail.date)" [ngClass]="getActiveDayClass(storeDetail.date)" >{{ storeDetail.date }}</div>
                      <div class="available-slots-container" *ngIf="storeDetail.listOfSlots && storeDetail.listOfSlots.length > 0">
                        <div class="slots">
                          <ng-container *ngFor="let slot of storeDetail.listOfSlots; let i=index">
                            <ion-button class="slot green" size="small" fill="outline" [disabled]="slot.isOccupied || slot.emptySlots <=0"
                              [ngClass]="{'active': isSlotActive(slot, storeDetail.date), 'red' : (slot.isOccupied || slot.emptySlots <=0) }"
                              (click)="onSlotBulkSelection(slot, storeDetail.date)">{{ (slot.isOccupied || slot.emptySlots <=0) ? 'NA' : 'AVL' }}</ion-button>
                          </ng-container>
                        </div>
                      </div>
                    </ion-label>
                    <!-- <ion-label class="slots-showing-day">{{ selectedDate | date:'fullDate'}}</ion-label> -->
                    <ion-button (click)="selectNextWeek()" fill="clear" size="small">
                      <ion-icon slot="icon-only" name="chevron-forward-sharp"></ion-icon>
                    </ion-button>
                  </div>
                </div>
                <div *ngIf="(!storeDetail.listOfSlots || (storeDetail.listOfSlots && storeDetail.listOfSlots.length === 0))">
                  <ion-label class="ion-text-wrap error-message text-center mt-3"> No slots avaiable for this date</ion-label>
                </div>
                <div style="margin-top: 24px">
                  <ion-label class="book-appointment-slots-title" >{{ serviceDetail.textAreaLabel ? serviceDetail.textAreaLabel : 'Request Summary' }}</ion-label>
                </div>
                <div *ngIf="serviceDetail?.showTextarea"
                  style="border: 1px solid #00000047; margin-top: 8px;margin-bottom: 24px;border-radius: 12px;">
                  <ion-textarea [placeholder]="serviceDetail?.placeholder" [(ngModel)]="comments"></ion-textarea>
                </div>
                <div class="slots-button-container container">
                  <ion-button size="default" class="slot-confirmation-btn" tappable (click)="bulkBooking()">
                    <span class="mr-1">{{ serviceDetail?.confirmBtnLabel ? serviceDetail?.confirmBtnLabel : 'Confirm My Slot'}}</span>
                    <!-- <ion-icon name="arrow-forward-circle-sharp"></ion-icon> -->
                  </ion-button>
                </div>
              </div>
            </section>
          </div>
        </div>
      </div>
    </div>
  </div>
</ion-content>
