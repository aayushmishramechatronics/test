"use strict";(self.webpackChunkschedulingApp=self.webpackChunkschedulingApp||[]).push([[3110],{73110:function(t,n,e){e.r(n),e.d(n,{BookedCustomersPageModule:function(){return P}});var o=e(12057),i=e(24751),s=e(46982),c=e(13644),a=e(97582),l=e(85386),r=e(16738),u=e.n(r),d=e(292),g=e(51900);function p(t,n){if(1&t&&(d.TgZ(0,"td",18),d.TgZ(1,"ion-label",36),d._uU(2),d.qZA(),d.qZA()),2&t){const t=d.oxw().$implicit,n=d.oxw();d.xp6(2),d.Oqu(n.vendorDeatil.conceirge?"":"Verification Code:"+t.verifyCode)}}function m(t,n){1&t&&d.GkF(0)}function b(t,n){if(1&t&&(d.TgZ(0,"div",37),d.YNc(1,m,1,0,"ng-container",38),d.qZA()),2&t){d.oxw();const t=d.MAs(61);d.xp6(1),d.Q6J("ngTemplateOutlet",t)}}function h(t,n){1&t&&d.GkF(0)}function C(t,n){if(1&t&&(d.TgZ(0,"div",37),d.YNc(1,h,1,0,"ng-container",38),d.qZA()),2&t){d.oxw();const t=d.MAs(61);d.xp6(1),d.Q6J("ngTemplateOutlet",t)}}function f(t,n){if(1&t){const t=d.EpF();d.TgZ(0,"ion-icon",39),d.NdJ("click",function(){return d.CHM(t),d.oxw().$implicit.options=!1}),d.qZA(),d.TgZ(1,"ul"),d.TgZ(2,"li"),d.TgZ(3,"button",40),d.NdJ("click",function(){d.CHM(t);const n=d.oxw(),e=n.$implicit,o=n.index;return d.oxw().statusUpdate(e,"IN_PROGRESS",o)}),d._uU(4,"In Progress"),d.qZA(),d.qZA(),d.TgZ(5,"li"),d.TgZ(6,"button",40),d.NdJ("click",function(){d.CHM(t);const n=d.oxw(),e=n.$implicit,o=n.index;return d.oxw().statusUpdate(e,"COMPLETED",o)}),d._uU(7,"Completed"),d.qZA(),d.qZA(),d.TgZ(8,"li"),d.TgZ(9,"button",40),d.NdJ("click",function(){d.CHM(t);const n=d.oxw(),e=n.$implicit,o=n.index;return d.oxw().confirmCancelAppointment(e,o)}),d._uU(10,"Cancel Request"),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw().$implicit;d.xp6(3),d.Q6J("disabled","COMPLETED"===t.bookingStatus),d.xp6(3),d.Q6J("disabled","COMPLETED"===t.bookingStatus),d.xp6(3),d.Q6J("disabled","COMPLETED"===t.bookingStatus)}}function Z(t,n){if(1&t){const t=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td",14),d.TgZ(2,"div",15),d._uU(3),d.qZA(),d.qZA(),d.TgZ(4,"td",16),d._uU(5),d.qZA(),d.TgZ(6,"td",17),d._uU(7),d.qZA(),d.TgZ(8,"td",16),d._uU(9),d.qZA(),d.TgZ(10,"td",16),d._uU(11),d._UZ(12,"br"),d._uU(13),d.qZA(),d.TgZ(14,"td",18),d._uU(15),d.qZA(),d.YNc(16,p,3,1,"td",21),d.TgZ(17,"td",17),d.TgZ(18,"div",22),d.TgZ(19,"ion-label",23),d.TgZ(20,"span",24),d._uU(21),d.qZA(),d.qZA(),d.TgZ(22,"div",25),d.TgZ(23,"ion-button",26),d.NdJ("click",function(){const n=d.CHM(t).$implicit;return n.options=!n.options}),d._UZ(24,"ion-icon",27),d.qZA(),d.qZA(),d.YNc(25,b,2,1,"div",28),d.qZA(),d.qZA(),d.TgZ(26,"td",29),d.TgZ(27,"div",30),d.TgZ(28,"ion-label",31),d.TgZ(29,"b"),d._uU(30,"Customer Name:- "),d.qZA(),d._uU(31),d.qZA(),d.TgZ(32,"ion-label",31),d.TgZ(33,"b"),d._uU(34,"Phone Number:- "),d.qZA(),d._uU(35),d.qZA(),d.TgZ(36,"ion-label",31),d.TgZ(37,"b"),d._uU(38,"Slot Time:-"),d.qZA(),d._uU(39),d.qZA(),d.TgZ(40,"ion-label",31),d.TgZ(41,"b"),d._uU(42,"Room Number:- "),d.qZA(),d._uU(43),d.qZA(),d.TgZ(44,"ion-label",31),d.TgZ(45,"b"),d._uU(46,"Booked Service"),d.qZA(),d._uU(47),d.qZA(),d.TgZ(48,"ion-label",31),d._uU(49),d.qZA(),d.TgZ(50,"div",32),d.TgZ(51,"div",33),d.TgZ(52,"ion-label",34),d.TgZ(53,"span",24),d._uU(54),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(55,"div",22),d.TgZ(56,"div",25),d.TgZ(57,"ion-button",26),d.NdJ("click",function(){const n=d.CHM(t).$implicit;return n.options=!n.options}),d._UZ(58,"ion-icon",27),d.qZA(),d.qZA(),d.YNc(59,C,2,1,"div",28),d.qZA(),d.qZA(),d.qZA(),d.YNc(60,f,11,3,"ng-template",null,35,d.W1O),d.qZA()}if(2&t){const t=n.$implicit,e=d.oxw();d.xp6(3),d.hij(" ",t.CustomerName," "),d.xp6(2),d.hij(" ",t.CustomerPhoneNumber," "),d.xp6(2),d.hij(" ",t.slotTime," "),d.xp6(2),d.hij(" ",t.room_no?t.room_no:"-"," "),d.xp6(2),d.hij(" ",t.bookedService,""),d.xp6(2),d.hij(" ",t.storeName," "),d.xp6(2),d.hij(" ",t.comments," "),d.xp6(1),d.Q6J("ngIf",!e.vendorDeatil.conceirge),d.xp6(4),d.Q6J("className",t.bookingStatus?"consultation-status-tag "+t.bookingStatus:"consultation-status-tag new"),d.xp6(1),d.Oqu(t.bookingStatus?t.bookingStatus:"New"),d.xp6(4),d.Q6J("ngIf",t.options),d.xp6(6),d.Oqu(t.CustomerName),d.xp6(4),d.Oqu(t.CustomerPhoneNumber),d.xp6(4),d.Oqu(t.slotTime),d.xp6(4),d.Oqu(t.room_no),d.xp6(4),d.Oqu(t.bookedService),d.xp6(2),d.Oqu(e.vendorDeatil.conceirge?"":"Verification Code:"+t.verifyCode),d.xp6(4),d.Q6J("className",t.bookingStatus?"consultation-status-tag "+t.bookingStatus:"consultation-status-tag new"),d.xp6(1),d.Oqu(t.bookingStatus?t.bookingStatus:"New"),d.xp6(5),d.Q6J("ngIf",t.options)}}function _(t,n){1&t&&(d.TgZ(0,"div",41),d._uU(1," There are no pending appointments "),d.qZA())}const O=[{path:"",component:(()=>{class t{constructor(t,n,e,o,i,s,c){this.appService=t,this.activatedRoute=n,this.router=e,this.utilAlertService=o,this.loadingController=i,this.popoverController=s,this.alertController=c,this.bookedCustomers=[],this.selectedDate=new Date}ngOnInit(){}ionViewWillEnter(){this.getUserDetail(),this.getVendorDeatil(),this.user=JSON.parse(localStorage.getItem("user")),this.activatedRoute.params.subscribe(t=>{t&&(this.storeId=t.id,this.selectedUser=this.storeId?this.user.shops.find(t=>t.phonenumber===this.storeId):this.user,this.selectedUser&&this.search())})}selectPreviousDate(){this.selectedDate=u()(this.selectedDate).subtract(1,"days"),this.bookedCustomers=[],this.search()}selectNextDate(){this.selectedDate=u()(this.selectedDate).add(1,"days"),this.bookedCustomers=[],this.search()}search(){return(0,a.mG)(this,void 0,void 0,function*(){const t=yield this.loadingController.create({message:"Loading..."});yield t.present();const n={userType:this.selectedUser.type,userId:this.selectedUser.userId,date:u()(this.selectedDate).format("DD-MM-YYYY")};this.bookedCustomers=[],this.appService.getBookedCustomerList(n).subscribe(n=>{t.dismiss(),n&&n.body&&(this.bookedCustomers=n.body)},()=>{t.dismiss()})})}createAppointment(){this.selectedUser&&this.selectedUser.loginId&&this.router.navigate(["/stores",this.selectedUser.loginId],{queryParams:{adminCreated:!0}})}statusUpdate(t,n,e){return(0,a.mG)(this,void 0,void 0,function*(){t.options=!1;const o=yield this.loadingController.create({message:"Loading..."});yield o.present(),this.appService.updateStatus({idBooking:t.idBooking,status:n}).subscribe(t=>{t&&t.body&&(o.dismiss(),this.bookedCustomers[e].bookingStatus=t.body.status,this.utilAlertService.showSuccess("Your slot status updated successfully"))},()=>{o.dismiss()})})}confirmCancelAppointment(t,n){return(0,a.mG)(this,void 0,void 0,function*(){t.options=!1,yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Confirm!",message:"Are you sure you want to cancel this request?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Confirm",handler:()=>{this.cancelAppointment(t,n)}}]})).present()})}cancelAppointment(t,n){return(0,a.mG)(this,void 0,void 0,function*(){const e=yield this.loadingController.create({message:"Loading..."});yield e.present(),this.appService.cancelSlot({bookingId:t.idBooking}).subscribe(t=>{t&&t.body&&(e.dismiss(),this.bookedCustomers.splice(n,1),this.utilAlertService.showSuccess("Your slot is cancelled"))},()=>{e.dismiss()})})}getUserDetail(){this.appService.userDetail.subscribe(t=>{this.user=t,this.selectedUser=t})}getVendorDeatil(){this.appService.vendorDeatil.subscribe(t=>{this.vendorDeatil=t})}editShop(){this.router.navigate(["/shop-keeper"])}isTodayCheck(){return u()(new Date).format("DD-MM-YYYY")===u()(this.selectedDate).format("DD-MM-YYYY")}}return t.\u0275fac=function(n){return new(n||t)(d.Y36(l.z),d.Y36(c.gz),d.Y36(c.F0),d.Y36(g.F),d.Y36(s.HT),d.Y36(s.Dh),d.Y36(s.Br))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-booked-customers"]],decls:39,vars:6,consts:[[1,"theme-bg-content-area"],[1,"container"],[1,"d-block",2,"text-align","right","margin","8pt 16pt","display","flex","justify-content","flex-end","align-items","center"],["tappable","","fill","outline",1,"pay-now-btn",3,"click"],["name","refresh-circle-outline"],[1,"date-selection"],["fill","clear","size","small",3,"click"],["slot","icon-only","name","chevron-back-sharp"],[1,"slots-showing-day"],["slot","icon-only","name","chevron-forward-sharp"],[1,"consultation-list-container","p-0"],[1,"p-0",2,"width","100%"],["size","12",1,"p-0"],[1,"consultation-table"],[1,"availability-column","ion-hide-sm-down",2,"width","15%"],[1,"d-flex","align-items-center"],[1,"ion-hide-sm-down",2,"width","15%"],[1,"ion-hide-sm-down",2,"width","10%"],[1,"ion-hide-sm-down",2,"width","20%"],[4,"ngFor","ngForOf"],["class","no-result",4,"ngIf"],["style","width: 20%;","class","ion-hide-sm-down",4,"ngIf"],[1,"action-container"],[1,"ion-text-wrap","mr-1",2,"min-width","200px"],[3,"className"],[1,"options"],["slot","end","tappable","","strong","true","fill","block",1,"menu-btn",3,"click"],["name","ellipsis-vertical"],["class","status-popover",4,"ngIf"],[1,"ion-hide-sm-up",2,"width","97%","padding-top","0"],[1,"mobile-view-contaner"],[1,"name"],[1,"status"],[1,"d-flex"],[1,"ion-text-wrap","mr-1"],["statusList",""],[1,"ion-text-wrap"],[1,"status-popover"],[4,"ngTemplateOutlet"],["name","close",3,"click"],[3,"disabled","click"],[1,"no-result"]],template:function(t,n){1&t&&(d.TgZ(0,"ion-content",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"ion-button",3),d.NdJ("click",function(){return n.createAppointment()}),d.TgZ(4,"span"),d._uU(5,"Create Appointment"),d.qZA(),d.qZA(),d.TgZ(6,"ion-button",3),d.NdJ("click",function(){return n.search()}),d._UZ(7,"ion-icon",4),d.qZA(),d.qZA(),d.TgZ(8,"div",5),d.TgZ(9,"ion-button",6),d.NdJ("click",function(){return n.selectPreviousDate()}),d._UZ(10,"ion-icon",7),d.qZA(),d.TgZ(11,"ion-label",8),d._uU(12),d.ALo(13,"date"),d.qZA(),d.TgZ(14,"ion-button",6),d.NdJ("click",function(){return n.selectNextDate()}),d._UZ(15,"ion-icon",9),d.qZA(),d.qZA(),d.TgZ(16,"ion-grid",10),d.TgZ(17,"ion-row",11),d.TgZ(18,"ion-col",12),d.TgZ(19,"table",13),d.TgZ(20,"tbody"),d.TgZ(21,"tr"),d.TgZ(22,"td",14),d.TgZ(23,"div",15),d._uU(24,"Customer Name"),d.qZA(),d.qZA(),d.TgZ(25,"td",16),d._uU(26," Phone Number "),d.qZA(),d.TgZ(27,"td",17),d._uU(28," Slot Time "),d.qZA(),d.TgZ(29,"td",16),d._uU(30," Room Number "),d.qZA(),d.TgZ(31,"td",16),d._uU(32," Booked Service "),d.qZA(),d.TgZ(33,"td",18),d._uU(34," Comments "),d.qZA(),d.TgZ(35,"td",17),d._uU(36," Status "),d.qZA(),d.qZA(),d.YNc(37,Z,62,20,"tr",19),d.qZA(),d.qZA(),d.YNc(38,_,2,0,"div",20),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(12),d.Oqu(d.xi3(13,3,n.selectedDate,"EE, MMMM d, yyyy")),d.xp6(25),d.Q6J("ngForOf",n.bookedCustomers),d.xp6(1),d.Q6J("ngIf",n.bookedCustomers&&0===n.bookedCustomers.length))},directives:[s.W2,s.YG,s.gu,s.Q$,s.jY,s.Nd,s.wI,o.sg,o.O5,o.tP],pipes:[o.uU],styles:[".booked-customer-list[_ngcontent-%COMP%]   .booked-customer-item[_ngcontent-%COMP%]{font-size:9pt;color:#414141;font-weight:400;--min-height: 32px}.booked-customer-list[_ngcontent-%COMP%]   .booked-customer-item[_ngcontent-%COMP%]   --padding[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{display:flex;align-items:center}.date-selection[_ngcontent-%COMP%]{display:flex;margin:4pt 0;justify-content:space-between;align-items:center}.date-selection[_ngcontent-%COMP%]   .slots-showing-day[_ngcontent-%COMP%]{font-size:12pt;color:#414141}.today[_ngcontent-%COMP%]{background-color:#000}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]{font-size:9pt;color:#414141;font-weight:400;--min-height: 32px}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   .name-label[_ngcontent-%COMP%]{display:flex;align-items:center}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   .name-label[_ngcontent-%COMP%]   .available-icon[_ngcontent-%COMP%]{color:#3cb371}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   --padding[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{display:flex;align-items:center}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]{min-height:15px;font-size:7pt;font-weight:500;margin:0;--padding-start: 4px;--padding-end: 4px;--padding-top: 0px;--padding-bottom: 0px;line-height:unset;--border-radius: 3px;color:#f3f3f3}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   .start-btn.old[_ngcontent-%COMP%]{--background: lightgrey}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   .download-btn[_ngcontent-%COMP%]{min-height:15px;font-size:7pt;font-weight:500;margin:0;--padding-start: 4px;--padding-end: 4px;--padding-top: 0px;--padding-bottom: 0px;line-height:unset;--border-radius: 3px;--background: #747474;color:#f3f3f3}.consultation-list[_ngcontent-%COMP%]   .consultation-item.today[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]{--background: mediumseagreen}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   .age[_ngcontent-%COMP%]{font-size:80%}.text-right[_ngcontent-%COMP%]{text-align:right}.options[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%}.options[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]{font-size:9pt;--background: transparent;color:#414141;--background-hover: transparent}.appt-default-button[_ngcontent-%COMP%]{font-size:14px;--background: #ffffff;--border-width: 1px;--border-radius: 14px !important;--padding-start: 14px;--padding-end: 14px;--padding-top: 0px;--padding-bottom: 0px;--background-hover: #2cd18a;--background-hover-opacity: 1;--background-activated: #2cd18a;--box-shadow: none;height:28px;min-width:112px;line-height:normal;margin-left:4pt;font-weight:600}.appt-default-button[_ngcontent-%COMP%]   .button-label[_ngcontent-%COMP%]{text-transform:none}.appt-default-button.book-btn[_ngcontent-%COMP%]{--border-color: #2cd18a;color:#414141}.appt-default-button.other-btn[_ngcontent-%COMP%]{--border-color: #b1b1b1;color:#414141}.appt-default-button[_ngcontent-%COMP%]:hover{color:#fff}.consultation-list-container[_ngcontent-%COMP%]{padding:0 40px}.consultation-list-container[_ngcontent-%COMP%]   .consultation-table[_ngcontent-%COMP%]{width:100%}.consultation-list-container[_ngcontent-%COMP%]   .consultation-table[_ngcontent-%COMP%]   .today[_ngcontent-%COMP%]{background-color:#fafafa}.consultation-list-container[_ngcontent-%COMP%]   .consultation-table[_ngcontent-%COMP%]   .value-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.consultation-list-container[_ngcontent-%COMP%]   .consultation-table[_ngcontent-%COMP%]   .value-label[_ngcontent-%COMP%]{font-size:14px;color:#414141}.consultation-list-container[_ngcontent-%COMP%]   .consultation-table[_ngcontent-%COMP%]   .text-small[_ngcontent-%COMP%]{font-size:13px;color:#717171}.consultation-list-container[_ngcontent-%COMP%]   .consultation-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #eae8e8}.consultation-list-container[_ngcontent-%COMP%]   .consultation-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px}.consultation-list-container[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]{display:flex;align-items:center}.consultation-list-container[_ngcontent-%COMP%]   .mobile-view-contaner[_ngcontent-%COMP%]{display:flex;flex-direction:column}.consultation-list-container[_ngcontent-%COMP%]   .mobile-view-contaner[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;color:#414141;line-height:20px}.consultation-list-container[_ngcontent-%COMP%]   .mobile-view-contaner[_ngcontent-%COMP%]   .patient-name[_ngcontent-%COMP%]{font-size:14px;color:#717171;line-height:20px;word-break:break-word}.consultation-list-container[_ngcontent-%COMP%]   .mobile-view-contaner[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#717171;font-size:12px;line-height:20px}.consultation-list-container[_ngcontent-%COMP%]   .mobile-view-contaner[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{display:flex}.consultation-list-container[_ngcontent-%COMP%]   .no-result[_ngcontent-%COMP%]{color:#df5e57;padding:8px;display:flex;justify-content:center}.consultation-status-tag[_ngcontent-%COMP%]{padding:2px 8px;border-radius:2px;font-size:11px;font-weight:600}.consultation-status-tag.new[_ngcontent-%COMP%]{color:#fff;background:#3688cb}.consultation-status-tag.PENDING[_ngcontent-%COMP%]{color:#fff;background:#9a92c9}.consultation-status-tag.SCHEDULED[_ngcontent-%COMP%]{color:#fff;background:#3688cb}.consultation-status-tag.IN_PROGRESS[_ngcontent-%COMP%]{color:#fff;background:#e88231}.consultation-status-tag.COMPLETED[_ngcontent-%COMP%]{color:#fff;background:#4f8b46}"]}),t})()}];let M=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[c.Bz.forChild(O)],c.Bz]}),t})();var x=e(45642);let P=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[o.ez,i.u5,s.Pc,x.K,M]]}),t})()}}]);