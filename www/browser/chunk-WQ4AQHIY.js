import{D as u,G as B,H as b,J as f,L as I,e as P,k as O}from"./chunk-PCOB2NJL.js";import{b as C}from"./chunk-YDS7KU35.js";import{d as E}from"./chunk-5AT3KRLK.js";import{b as h}from"./chunk-ILZBBHX6.js";import{e as s,f as A,g as z,l as L}from"./chunk-3H4RQUCR.js";import{b as D,e as g}from"./chunk-B5PDLB3A.js";import{h as c}from"./chunk-B7O3QC5Z.js";var j=":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}:host button{border-radius:8px;padding-left:12px;padding-right:12px;padding-top:6px;padding-bottom:6px;margin-left:2px;margin-right:2px;margin-top:0px;margin-bottom:0px;position:relative;-webkit-transition:150ms color ease-in-out;transition:150ms color ease-in-out;border:none;background:var(--ion-color-step-300, #edeef0);color:var(--ion-text-color, #000);font-family:inherit;font-size:inherit;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;overflow:hidden}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host button{padding-left:unset;padding-right:unset;-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px}}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host button{margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px}}:host(.time-active) #time-button,:host(.date-active) #date-button{color:var(--ion-color-base)}:host(.datetime-button-disabled){pointer-events:none}:host(.datetime-button-disabled) button{opacity:0.4}",F=":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}:host button{border-radius:8px;padding-left:12px;padding-right:12px;padding-top:6px;padding-bottom:6px;margin-left:2px;margin-right:2px;margin-top:0px;margin-bottom:0px;position:relative;-webkit-transition:150ms color ease-in-out;transition:150ms color ease-in-out;border:none;background:var(--ion-color-step-300, #edeef0);color:var(--ion-text-color, #000);font-family:inherit;font-size:inherit;cursor:pointer;-webkit-appearance:none;-moz-appearance:none;appearance:none;overflow:hidden}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host button{padding-left:unset;padding-right:unset;-webkit-padding-start:12px;padding-inline-start:12px;-webkit-padding-end:12px;padding-inline-end:12px}}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host button{margin-left:unset;margin-right:unset;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px}}:host(.time-active) #time-button,:host(.date-active) #date-button{color:var(--ion-color-base)}:host(.datetime-button-disabled){pointer-events:none}:host(.datetime-button-disabled) button{opacity:0.4}",W=(()=>{let x=class{constructor(r){L(this,r),this.datetimeEl=null,this.overlayEl=null,this.datetimePresentation="date-time",this.datetimeActive=!1,this.color="primary",this.disabled=!1,this.getParsedDateValues=t=>t===""||t===void 0||t===null?[]:Array.isArray(t)?t:[t],this.setDateTimeText=()=>{let{datetimeEl:t,datetimePresentation:i}=this;if(!t)return;let{value:a,locale:e,hourCycle:n,preferWheel:d,multiple:l,titleSelectedDatesFormatter:k}=t,m=this.getParsedDateValues(a),y=O(m.length>0?m:[I()]),o=y[0],v=P(e,n);switch(y.forEach(p=>{p.tzOffset=void 0}),this.dateText=this.timeText=void 0,i){case"date-time":case"time-date":let p=b(e,o),w=u(e,o,v);d?this.dateText=`${p} ${w}`:(this.dateText=p,this.timeText=w);break;case"date":if(l&&m.length!==1){let T=`${m.length} days`;if(k!==void 0)try{T=k(m)}catch($){h("Exception in provided `titleSelectedDatesFormatter`: ",$)}this.dateText=T}else this.dateText=b(e,o);break;case"time":this.timeText=u(e,o,v);break;case"month-year":this.dateText=B(e,o);break;case"month":this.dateText=f(e,o,{month:"long"});break;case"year":this.dateText=f(e,o,{year:"numeric"});break}},this.waitForDatetimeChanges=()=>c(this,null,function*(){let{datetimeEl:t}=this;return t?new Promise(i=>{g(t,"ionRender",i,{once:!0})}):Promise.resolve()}),this.handleDateClick=t=>c(this,null,function*(){let{datetimeEl:i,datetimePresentation:a}=this;if(!i)return;let e=!1;switch(a){case"date-time":case"time-date":let n=i.presentation!=="date";!i.preferWheel&&n&&(i.presentation="date",e=!0);break}this.selectedButton="date",this.presentOverlay(t,e,this.dateTargetEl)}),this.handleTimeClick=t=>{let{datetimeEl:i,datetimePresentation:a}=this;if(!i)return;let e=!1;switch(a){case"date-time":case"time-date":i.presentation!=="time"&&(i.presentation="time",e=!0);break}this.selectedButton="time",this.presentOverlay(t,e,this.timeTargetEl)},this.presentOverlay=(t,i,a)=>c(this,null,function*(){let{overlayEl:e}=this;e&&(e.tagName==="ION-POPOVER"?(i&&(yield this.waitForDatetimeChanges()),e.present(Object.assign(Object.assign({},t),{detail:{ionShadowTarget:a}}))):e.present())})}componentWillLoad(){return c(this,null,function*(){let{datetime:r}=this;if(!r){h("An ID associated with an ion-datetime instance is required for ion-datetime-button to function properly.",this.el);return}let t=this.datetimeEl=document.getElementById(r);if(!t){h(`No ion-datetime instance found for ID '${r}'.`,this.el);return}new IntersectionObserver(e=>{let n=e[0];this.datetimeActive=n.isIntersecting},{threshold:.01}).observe(t);let a=this.overlayEl=t.closest("ion-modal, ion-popover");a&&a.classList.add("ion-datetime-button-overlay"),D(t,()=>{let e=this.datetimePresentation=t.presentation||"date-time";switch(this.setDateTimeText(),g(t,"ionChange",this.setDateTimeText),e){case"date-time":case"date":case"month-year":case"month":case"year":this.selectedButton="date";break;case"time-date":case"time":this.selectedButton="time";break}})})}render(){let{color:r,dateText:t,timeText:i,selectedButton:a,datetimeActive:e,disabled:n}=this,d=E(this);return s(A,{class:C(r,{[d]:!0,[`${a}-active`]:e,"datetime-button-disabled":n})},t&&s("button",{class:"ion-activatable",id:"date-button","aria-expanded":e?"true":"false",onClick:this.handleDateClick,disabled:n,part:"native",ref:l=>this.dateTargetEl=l},s("slot",{name:"date-target"},t),d==="md"&&s("ion-ripple-effect",null)),i&&s("button",{class:"ion-activatable",id:"time-button","aria-expanded":e?"true":"false",onClick:this.handleTimeClick,disabled:n,part:"native",ref:l=>this.timeTargetEl=l},s("slot",{name:"time-target"},i),d==="md"&&s("ion-ripple-effect",null)))}get el(){return z(this)}};return x.style={ios:j,md:F},x})();export{W as ion_datetime_button};
