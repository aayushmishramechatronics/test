import{c as Ae}from"./chunk-EKYLXDSD.js";import{a as Ve}from"./chunk-GQMNTOSR.js";import{b as De}from"./chunk-DZKO2NLF.js";import{Aa as k,Ab as ae,Ba as $,Bb as le,C as H,Cb as ce,D as M,Da as y,Ea as w,Ec as Re,F as S,Fa as O,G as J,Gc as Le,H as E,Hb as de,Ib as ge,J as Y,Jb as pe,Kb as ue,M as d,Mb as _e,N as g,Nb as me,Ob as he,Pb as fe,Qb as ye,R as X,S as V,T as Q,Tb as we,Yb as Oe,Za as ee,Zb as be,_a as te,ac as Ce,c as L,ca as c,d as W,da as b,dc as xe,e as B,eb as ie,ec as ve,fc as Pe,gc as Ie,ia as C,k as q,ka as u,kc as Se,la as s,lc as Te,ma as l,mc as Me,na as A,oa as P,oc as Ee,pa as I,pb as ne,pc as ke,ra as f,s as K,sa as h,ta as r,tb as oe,u as Z,vc as Ne,y as D,ya as x,yb as re,za as _,zb as se}from"./chunk-W2VBRA3B.js";import{a as R,h as v}from"./chunk-B7O3QC5Z.js";var rt=(()=>{class n{constructor(e){this.sanitizer=e}transform(e,i){switch(i){case"html":return this.sanitizer.bypassSecurityTrustHtml(e);case"style":return this.sanitizer.bypassSecurityTrustStyle(e);case"script":return this.sanitizer.bypassSecurityTrustScript(e);case"url":return this.sanitizer.bypassSecurityTrustUrl(e);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(e);default:throw new Error(`Invalid safe type specified: ${i}`)}}static{this.\u0275fac=function(i){return new(i||n)(b(ne,16))}}static{this.\u0275pipe=Y({name:"safe",type:n,pure:!0,standalone:!0})}}return n})();var ct=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=E({type:n})}static{this.\u0275inj=M({})}}return n})();var j=class{constructor(){}loadScript(m,e,i,t=null){if(typeof document<"u"&&!document.getElementById(m)){let o=document.createElement("script");o.async=!0,o.src=e,o.onload=i,t||(t=document.head),t.appendChild(o)}}},F=class{},Ue=()=>typeof window.google?.accounts<"u",je=()=>{if(!Ue())throw new Error("Google Accounts API is undefined")},z=()=>(je(),window.google.accounts),Fe={oneTapEnabled:!0},T=(()=>{class n extends j{static{this.PROVIDER_ID="GOOGLE"}constructor(e,i){super(),this.clientId=e,this.initOptions=i,this.changeUser=new V,this._socialUser=new L(null),this._accessToken=new L(null),this._receivedAccessToken=new V,this.initOptions=R(R({},Fe),this.initOptions),this._socialUser.pipe(D(1)).subscribe(this.changeUser),this._accessToken.pipe(D(1)).subscribe(this._receivedAccessToken)}initialize(e,i){return new Promise((t,o)=>{try{this.loadScript(n.PROVIDER_ID,this.getGoogleLoginScriptSrc(i),()=>{if(Ue()){if(google.accounts.id.initialize({client_id:this.clientId,auto_select:e,callback:({credential:a})=>{let p=this.createSocialUser(a);this._socialUser.next(p)},prompt_parent_id:this.initOptions?.prompt_parent_id,itp_support:this.initOptions.oneTapEnabled,use_fedcm_for_prompt:this.initOptions.oneTapEnabled}),this.initOptions.oneTapEnabled&&this._socialUser.pipe(K(a=>a===null)).subscribe(()=>google.accounts.id.prompt(console.debug)),this.initOptions.scopes){let a=this.initOptions.scopes instanceof Array?this.initOptions.scopes.filter(p=>p).join(" "):this.initOptions.scopes;this._tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:a,prompt:this.initOptions.prompt,callback:p=>{p.error?this._accessToken.error({code:p.error,description:p.error_description,uri:p.error_uri}):this._accessToken.next(p.access_token)}})}t()}})}catch(a){o(a)}})}getLoginStatus(){return new Promise((e,i)=>{this._socialUser.value?e(this._socialUser.value):i(`No user is currently logged in with ${n.PROVIDER_ID}`)})}refreshToken(){return new Promise((e,i)=>{z().id.revoke(this._socialUser.value.id,t=>{t.error?i(t.error):e(this._socialUser.value)})})}getAccessToken(){return new Promise((e,i)=>{this._tokenClient?(this._tokenClient.requestAccessToken({hint:this._socialUser.value?.email}),this._receivedAccessToken.pipe(Z(1)).subscribe(e)):this._socialUser.value?i("No token client was instantiated, you should specify some scopes."):i("You should be logged-in first.")})}revokeAccessToken(){return new Promise((e,i)=>{this._tokenClient?this._accessToken.value?z().oauth2.revoke(this._accessToken.value,()=>{this._accessToken.next(null),e()}):i("No access token to revoke"):i("No token client was instantiated, you should specify some scopes.")})}signIn(){return Promise.reject('You should not call this method directly for Google, use "<asl-google-signin-button>" wrapper or generate the button yourself with "google.accounts.id.renderButton()" (https://developers.google.com/identity/gsi/web/guides/display-button#javascript)')}signOut(){return v(this,null,function*(){z().id.disableAutoSelect(),this._socialUser.next(null)})}createSocialUser(e){let i=new F;i.idToken=e;let t=this.decodeJwt(e);return i.id=t.sub,i.name=t.name,i.email=t.email,i.photoUrl=t.picture,i.firstName=t.given_name,i.lastName=t.family_name,i}decodeJwt(e){let t=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(window.atob(t).split("").map(function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(o)}getGoogleLoginScriptSrc(e){return e?`https://accounts.google.com/gsi/client?hl=${e}`:"https://accounts.google.com/gsi/client"}}return n})(),N=(()=>{class n{static{this.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found"}static{this.ERR_NOT_LOGGED_IN="Not logged in"}static{this.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?"}static{this.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token"}static{this.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN="Chosen login provider is not supported for getting an access token"}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}constructor(e,i,t){this._ngZone=i,this._injector=t,this.providers=new Map,this.autoLogin=!1,this.lang="",this._user=null,this._authState=new W(1),this.initialized=!1,this._initState=new B,e instanceof Promise?e.then(o=>{this.initialize(o)}):this.initialize(e)}initialize(e){this.autoLogin=e.autoLogin!==void 0?e.autoLogin:!1,this.lang=e.lang!==void 0?e.lang:"";let{onError:i=console.error}=e;e.providers.forEach(t=>{this.providers.set(t.id,"prototype"in t.provider?this._injector.get(t.provider):t.provider)}),Promise.all(Array.from(this.providers.values()).map(t=>t.initialize(this.autoLogin,this.lang))).then(()=>{if(this.autoLogin){let t=[],o=!1;this.providers.forEach((a,p)=>{let G=a.getLoginStatus();t.push(G),G.then(ze=>{this.setUser(ze,p),o=!0}).catch(console.debug)}),Promise.all(t).catch(()=>{o||(this._user=null,this._authState.next(null))})}this.providers.forEach((t,o)=>{q(t.changeUser)&&t.changeUser.subscribe(a=>{this._ngZone.run(()=>{this.setUser(a,o)})})})}).catch(t=>{i(t)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}getAccessToken(e){return v(this,null,function*(){let i=this.providers.get(e);if(this.initialized)if(i){if(!(i instanceof T))throw n.ERR_NOT_SUPPORTED_FOR_ACCESS_TOKEN}else throw n.ERR_LOGIN_PROVIDER_NOT_FOUND;else throw n.ERR_NOT_INITIALIZED;return yield i.getAccessToken()})}refreshAuthToken(e){return new Promise((i,t)=>{if(!this.initialized)t(n.ERR_NOT_INITIALIZED);else{let o=this.providers.get(e);o?typeof o.refreshToken!="function"?t(n.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN):o.refreshToken().then(a=>{this.setUser(a,e),i()}).catch(a=>{t(a)}):t(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}refreshAccessToken(e){return new Promise((i,t)=>{if(!this.initialized)t(n.ERR_NOT_INITIALIZED);else if(e!==T.PROVIDER_ID)t(n.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{let o=this.providers.get(e);o instanceof T?o.revokeAccessToken().then(i).catch(t):t(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}signIn(e,i){return new Promise((t,o)=>{if(!this.initialized)o(n.ERR_NOT_INITIALIZED);else{let a=this.providers.get(e);a?a.signIn(i).then(p=>{this.setUser(p,e),t(p)}).catch(p=>{o(p)}):o(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}signOut(e=!1){return new Promise((i,t)=>{if(!this.initialized)t(n.ERR_NOT_INITIALIZED);else if(!this._user)t(n.ERR_NOT_LOGGED_IN);else{let o=this._user.provider,a=this.providers.get(o);a?a.signOut(e).then(()=>{i(),this.setUser(null)}).catch(p=>{t(p)}):t(n.ERR_LOGIN_PROVIDER_NOT_FOUND)}})}setUser(e,i){e&&i&&(e.provider=i),this._user=e,this._authState.next(e)}static{this.\u0275fac=function(i){return new(i||n)(S("SocialAuthServiceConfig"),S(Q),S(X))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vt=(()=>{class n{static initialize(e){return{ngModule:n,providers:[N,{provide:"SocialAuthServiceConfig",useValue:e}]}}constructor(e){if(e)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static{this.\u0275fac=function(i){return new(i||n)(S(n,12))}}static{this.\u0275mod=E({type:n})}static{this.\u0275inj=M({providers:[N],imports:[ie]})}}return n})();function We(n,m){if(n&1){let e=f();s(0,"ion-grid")(1,"ion-radio-group",12),h("ionChange",function(t){d(e);let o=r(2);return g(o.typeChnage(t))}),s(2,"ion-row")(3,"ion-col")(4,"ion-item",13)(5,"ion-label"),_(6,"Customer"),l(),A(7,"ion-radio",14),l()(),s(8,"ion-col")(9,"ion-item",13)(10,"ion-label"),_(11),l(),A(12,"ion-radio",14),l()()()()()}if(n&2){let e=r(2);c(),u("value",e.type),c(6),u("value",!1),c(4),k(e.vendorDeatil?e.vendorDeatil.label:"Shop"),c(),u("value",!0)}}function Be(n,m){if(n&1){let e=f();s(0,"div",23)(1,"ion-item",17)(2,"ion-input",26),O("ngModelChange",function(t){d(e);let o=r(4);return w(o.room_no,t)||(o.room_no=t),g(t)}),l()()()}if(n&2){let e=r(4);c(2),y("ngModel",e.room_no)}}function qe(n,m){if(n&1){let e=f();P(0),s(1,"div",22)(2,"div",23)(3,"ion-item",13)(4,"ion-label"),_(5,"Hotel Guest"),l(),s(6,"ion-toggle",24),O("ngModelChange",function(t){d(e);let o=r(3);return w(o.is_guest,t)||(o.is_guest=t),g(t)}),h("ionChange",function(t){d(e);let o=r(3);return g(o.onGuestTypeChange(t))}),l()()(),C(7,Be,3,1,"div",25),l(),I()}if(n&2){let e=r(3);c(6),y("ngModel",e.is_guest),c(),u("ngIf",e.is_guest)}}function Ke(n,m){if(n&1){let e=f();P(0),s(1,"div",15)(2,"div",16)(3,"ion-item",17)(4,"ion-input",18),O("ngModelChange",function(t){d(e);let o=r(2);return w(o.mobileNumber,t)||(o.mobileNumber=t),g(t)}),l()()()(),C(5,qe,8,2,"ng-container",7),s(6,"div",19)(7,"ion-button",20),h("click",function(){d(e);let t=r(2);return g(t.confirmMobile())}),s(8,"span",21),_(9,"Login"),l()()(),I()}if(n&2){r();let e=x(2),i=r();c(4),y("ngModel",i.mobileNumber),c(),u("ngIf",!i.type),c(2),u("disabled",e.invalid)}}function Ze(n,m){if(n&1){let e=f();P(0),s(1,"div",27)(2,"div")(3,"span"),_(4,"or"),l()()(),s(5,"div",28)(6,"ion-item",29)(7,"ion-img",30),h("click",function(){d(e);let t=r(2);return g(t.signInWithGoogle())}),l()()(),I()}}function He(n,m){if(n&1){let e=f();P(0),s(1,"form",null,0)(3,"div",8)(4,"ion-label",9)(5,"button",10),h("click",function(){d(e);let t=r();return g(t.close())}),s(6,"span",11),_(7,"\xD7"),l()()(),s(8,"ion-label",9),_(9," Login "),l(),C(10,We,13,4,"ion-grid",7)(11,Ke,10,3,"ng-container",7)(12,Ze,8,0,"ng-container",7),l()(),I()}if(n&2){let e=r();c(10),u("ngIf",e.enableRadio),c(),u("ngIf",e.vendorDeatil[e.type?"S":"c"]&&e.vendorDeatil[e.type?"S":"c"].loginType.normalLogin),c(),u("ngIf",e.vendorDeatil[e.type?"S":"c"]&&e.vendorDeatil[e.type?"S":"c"].loginType.googleLogin)}}function Je(n,m){if(n&1&&(s(0,"ion-select-option"),_(1),l()),n&2){let e=m.$implicit;c(),k(e.name)}}function Ye(n,m){if(n&1){let e=f();s(0,"ion-select",38),O("ngModelChange",function(t){d(e);let o=r(3);return w(o.firstName,t)||(o.firstName=t),g(t)}),C(1,Je,2,1,"ion-select-option",39),l()}if(n&2){let e=r(3);y("ngModel",e.firstName),c(),u("ngForOf",e.departments)}}function Xe(n,m){if(n&1){let e=f();s(0,"ion-input",40),O("ngModelChange",function(t){d(e);let o=r(3);return w(o.firstName,t)||(o.firstName=t),g(t)}),l()}if(n&2){let e=r(3);y("ngModel",e.firstName),u("placeholder",e.type?"Enter "+(e.vendorDeatil?e.vendorDeatil.label:"Shop")+" Name":"Enter Name")}}function Qe(n,m){if(n&1&&(s(0,"div",15)(1,"div",16)(2,"ion-item",17),C(3,Ye,2,2,"ion-select",36)(4,Xe,1,2,"ion-input",37),l()()()),n&2){let e=r(2);c(3),u("ngIf",e.vendorDeatil.conceirge),c(),u("ngIf",!e.vendorDeatil.conceirge)}}function $e(n,m){if(n&1){let e=f();s(0,"div",15)(1,"div",16)(2,"ion-item",17)(3,"ion-input",41),O("ngModelChange",function(t){d(e);let o=r(2);return w(o.firstName,t)||(o.firstName=t),g(t)}),l()()()()}if(n&2){let e=r(2);c(3),y("ngModel",e.firstName),u("placeholder",e.type?"Enter "+(e.vendorDeatil?e.vendorDeatil.label:"Shop")+" Name":"Enter Name")}}function et(n,m){if(n&1){let e=f();s(0,"div",15)(1,"div",16)(2,"ion-item",17)(3,"ion-input",42),h("keydown.enter",function(){d(e);let t=r(2);return g(t.login())}),O("ngModelChange",function(t){d(e);let o=r(2);return w(o.cnfPassword,t)||(o.cnfPassword=t),g(t)}),l()()()()}if(n&2){let e=r(2);c(3),y("ngModel",e.cnfPassword)}}function tt(n,m){if(n&1){let e=f();P(0),s(1,"form",31,1)(3,"ion-label",32)(4,"button",10),h("click",function(){d(e);let t=r();return g(t.close())}),s(5,"span",11),_(6,"\xD7"),l()()(),s(7,"ion-label",32),_(8," Login "),l(),C(9,Qe,5,2,"div",33)(10,$e,4,2,"div",33),s(11,"div",15)(12,"div",16)(13,"ion-item",17)(14,"ion-input",34),h("keydown.enter",function(){d(e);let t=r();return g(t.login())}),O("ngModelChange",function(t){d(e);let o=r();return w(o.password,t)||(o.password=t),g(t)}),l()()()(),C(15,et,4,1,"div",33),s(16,"ion-label",35),_(17," Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters "),l(),s(18,"div",19)(19,"ion-button",20),h("click",function(){d(e);let t=r();return g(t.login())}),s(20,"span",21),_(21),l()()()(),I()}if(n&2){let e=x(2),i=r();c(9),u("ngIf",i.firstTime&&i.type),c(),u("ngIf",i.firstTime&&!i.type),c(4),y("ngModel",i.password),c(),u("ngIf",i.firstTime),c(4),u("disabled",e.invalid),c(2),k(i.firstTime?"GET OTP":"Submit")}}function it(n,m){if(n&1){let e=f();s(0,"div",51)(1,"div",52),_(2,"Don't you get the SMS?"),l(),s(3,"div",53),h("click",function(){d(e);let t=r(2);return g(t.onResendOTPClick())}),_(4," Resend OTP"),l()()}}function nt(n,m){if(n&1){let e=f();P(0),s(1,"ion-label",9)(2,"button",10),h("click",function(){d(e);let t=r();return g(t.close())}),s(3,"span",11),_(4,"\xD7"),l()()(),s(5,"ion-label",9),_(6),l(),s(7,"form",31,2)(9,"div",43)(10,"div",44)(11,"ion-item",45)(12,"ion-input",46,3),O("ngModelChange",function(t){d(e);let o=r();return w(o.otpObj.digit1,t)||(o.otpObj.digit1=t),g(t)}),h("keyup",function(t){d(e);let o=x(16),a=r();return g(a.otpController(t,o,""))}),l()(),s(14,"ion-item",45)(15,"ion-input",47,4),O("ngModelChange",function(t){d(e);let o=r();return w(o.otpObj.digit2,t)||(o.otpObj.digit2=t),g(t)}),h("keyup",function(t){d(e);let o=x(13),a=x(19),p=r();return g(p.otpController(t,a,o))}),l()(),s(17,"ion-item",45)(18,"ion-input",48,5),O("ngModelChange",function(t){d(e);let o=r();return w(o.otpObj.digit3,t)||(o.otpObj.digit3=t),g(t)}),h("keyup",function(t){d(e);let o=x(16),a=x(22),p=r();return g(p.otpController(t,a,o))}),l()(),s(20,"ion-item",45)(21,"ion-input",49,6),O("ngModelChange",function(t){d(e);let o=r();return w(o.otpObj.digit4,t)||(o.otpObj.digit4=t),g(t)}),h("keyup",function(t){d(e);let o=x(19),a=r();return g(a.otpController(t,"",o))}),l()()()(),C(23,it,5,0,"div",50),s(24,"div",19)(25,"ion-button",20),h("click",function(){d(e);let t=r();return g(t.confirmOtp())}),s(26,"span",21),_(27,"Confirm"),l()()()(),I()}if(n&2){let e=x(8),i=r();c(6),$(" Please enter the OTP number sent to +91 ",i.user==null?null:i.user.phonenumber," "),c(6),y("ngModel",i.otpObj.digit1),c(3),y("ngModel",i.otpObj.digit2),c(3),y("ngModel",i.otpObj.digit3),c(3),y("ngModel",i.otpObj.digit4),c(2),u("ngIf",i.resendOTPButton),c(2),u("disabled",e.invalid)}}var Ut=(()=>{class n{constructor(e,i,t,o,a,p){this.appService=e,this.modalCtrl=i,this.utilAlertService=t,this.router=o,this.authService=a,this.loadingController=p,this.type=!1,this.enableRadio=!1,this.showLoginContainer=!0,this.departments=[],this.is_guest=!1,this.otpObj=new Ae,this.getUserDetail(),this.getVendorDeatil(),this.resendOTPButton=!1,this.getRespAfterGoogleSignin()}ngOnInit(){}setResendBtnInterval(e){setTimeout(()=>{this.resendOTPButton=!0},e)}typeChnage(e){e.detail&&(this.type=e.detail.value)}onGuestTypeChange(e){this.is_guest=e}confirmMobile(){return v(this,null,function*(){if(this.mobileNumber){let e={phonenumber:this.mobileNumber,categoryid:this.vendorDeatil.idCategory,is_guest:this.is_guest?"Y":"N"};this.is_guest&&this.room_no&&(e.room_no=this.room_no,localStorage.setItem("room_no",this.room_no));let i=yield this.loadingController.create({message:"Loading..."});yield i.present(),this.appService.confirmMobile(e).subscribe(t=>{t&&t.body&&(t.body.error?this.utilAlertService.showAlert(t.body.error):(this.showOTPContainer=!1,this.showLoginContainer=!1,this.showPassContainer=!0,this.firstTime=t.body.firstTime)),i.dismiss()},()=>{i.dismiss()})}})}onResendOTPClick(){return v(this,null,function*(){if(this.mobileNumber){let e=yield this.loadingController.create({message:"Loading..."});yield e.present(),this.appService.resentOTP({phoneNumber:this.mobileNumber}).subscribe(i=>{e.dismiss(),i&&i.body&&(i.body.error?this.utilAlertService.showAlert(i.body.error):(this.resendOTPButton=!1,this.setResendBtnInterval(3e4)))},()=>{e.dismiss()})}})}login(){return v(this,null,function*(){if(this.mobileNumber&&this.mobileNumber.toString().length===10)if(!this.firstTime||this.firstTime&&this.password===this.cnfPassword){let e={name:this.firstName,description:"",phonenumber:this.mobileNumber,password:this.password,idCategory:this.vendorDeatil.idCategory,type:this.type?"S":"c"},i=yield this.loadingController.create({message:"Loading..."});yield i.present(),this.appService.signup(e).subscribe(t=>{i.dismiss(),t&&t.body?t.body.error?this.utilAlertService.showAlert(t.body.error):(this.user=t.body,localStorage.setItem("user",JSON.stringify(t.body)),t.body.confirmed?(this.appService.setLoginFalg(!0),this.appService.setUserDetail(t.body),this.dismiss(!0)):(this.showOTPContainer=!0,this.showLoginContainer=!1,this.showPassContainer=!1,this.setResendBtnInterval(3e4))):this.dismiss(!1)},()=>{i.dismiss()})}else this.utilAlertService.showAlert("Password missmatch");else this.utilAlertService.showAlert("Enter Valid Phone Number")})}close(){this.dismiss()}dismiss(e=!1){return v(this,null,function*(){yield this.modalCtrl.dismiss(e?{flag:e}:!1)})}otpController(e,i,t){let o=e.target.value,a=e.target.value.trim().replace(/[^\d]/g,""),p=Object.values(this.otpObj).join("");if(this.enableVerifyOtp=p.length===6,o.trim().length===a.length)if(i&&a.length>0)i.setFocus();else if(a.length===0&&t)t.setFocus();else return 0;else e.target.value=a}confirmOtp(){if(this.otpObj&&this.user){let e=Object.values(this.otpObj).join("");this.appService.confirmOTP({userId:this.user.userId,otp:e}).subscribe(i=>{if(i&&i.body)if(i.body.error)this.utilAlertService.showAlert(i.body.error);else{let t=JSON.parse(localStorage.getItem("user"));t&&i.body.confirmed?(t.confirmed=!0,this.appService.setLoginFalg(!0),this.appService.setUserDetail(t),localStorage.setItem("user",JSON.stringify(t)),this.dismiss(!0)):(this.utilAlertService.showSuccess(t.message),this.dismiss(!1))}})}}getUserDetail(){this.appService.userDetail.subscribe(e=>{this.user=e})}getVendorDeatil(){this.appService.vendorDeatil.subscribe(e=>{e&&(this.vendorDeatil=e,this.departments=e.departments)})}signInWithGoogle(){this.authService.signIn(T.PROVIDER_ID)}getRespAfterGoogleSignin(){this.authService.authState.subscribe(e=>{e&&this.loginToOurAppUsingGoogleId(e)})}loginToOurAppUsingGoogleId(e){return v(this,null,function*(){if(e){let i=yield this.loadingController.create({message:"Loading..."});yield i.present();let t={name:e.name,description:"",phonenumber:e.id,idCategory:this.vendorDeatil.idCategory,type:"c"};this.appService.signup(t).subscribe(o=>{i.dismiss(),o&&o.body?o.body.error?this.utilAlertService.showAlert(o.body.error):(this.user=o.body,localStorage.setItem("user",JSON.stringify(o.body)),this.appService.setLoginFalg(!0),this.appService.setUserDetail(o.body),this.dismiss(!0)):this.dismiss(!1)},()=>{i.dismiss()})}})}static{this.\u0275fac=function(i){return new(i||n)(b(De),b(Le),b(Ve),b(oe),b(N),b(Re))}}static{this.\u0275cmp=J({type:n,selectors:[["app-login"]],inputs:{type:"type",enableRadio:"enableRadio"},decls:4,vars:3,consts:[["loginForm","ngForm"],["passForm","ngForm"],["otpForm","ngForm"],["loginOtpdigit1",""],["loginOtpdigit2",""],["loginOtpdigit3",""],["loginOtpdigit4",""],[4,"ngIf"],[1,"login-container"],[1,"ion-text-wrap","login-model-label"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[3,"ionChange","value"],["lines","none"],["slot","start",3,"value"],[1,"mobileNoMaindiv","mt-2","mb-2"],[1,"item-small-text"],[1,"firstName-item"],["type","text","name","mobileNumber","placeholder","Enter Mobile Number","required","",3,"ngModelChange","ngModel"],[1,"login-otp-button-container","d-flex","justify-content-end","mt-2"],["size","default","type","submit","id","login",1,"login-confirmation-btn",3,"click","disabled"],[1,"mr-1"],[1,"row","m-0"],[1,"col-6","p-0"],["slot","end",3,"ngModelChange","ionChange","ngModel"],["class","col-6 p-0",4,"ngIf"],["type","number","name","roomNumber","placeholder","Enter Room Number","required","",3,"ngModelChange","ngModel"],[1,"or-divider"],[2,"display","flex","justify-content","center"],["lines","none",1,"my-3"],["src","../../../assets/images/google.png",3,"click"],[1,"otp-form","customzied","mt-2"],[1,"ion-text-wrap","login-model-label","mb-2"],["class","mobileNoMaindiv mt-2 mb-2",4,"ngIf"],["type","password","title","Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters","pattern","(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}","name","password","placeholder","Enter Password","required","",3,"keydown.enter","ngModelChange","ngModel"],[1,"ion-text-wrap","login-model-label","mb-2",2,"font-size","9pt","color","green"],["style","min-width: 100%;","placeholder","Select Name","name","firstname","interface","action-sheet",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","name","firstName","required","",3,"ngModel","placeholder","ngModelChange",4,"ngIf"],["placeholder","Select Name","name","firstname","interface","action-sheet",2,"min-width","100%",3,"ngModelChange","ngModel"],[4,"ngFor","ngForOf"],["type","text","name","firstName","required","",3,"ngModelChange","ngModel","placeholder"],["type","text","name","firstName","placeholder","Enter Password","required","",3,"ngModelChange","ngModel","placeholder"],["type","password","title","Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters","pattern","(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}","name","cnfpassword","placeholder","Confirm Password","required","",3,"keydown.enter","ngModelChange","ngModel"],[1,"otp-group-control"],[1,"otp-group"],[1,"customzied-item","mb-0","otp-item"],["type","tel","name","loginOtpdigit1","minlength","1","maxlength","1","required","",3,"ngModelChange","keyup","ngModel"],["type","tel","name","loginOtpdigit2","minlength","1","maxlength","1","required","",3,"ngModelChange","keyup","ngModel"],["type","tel","name","loginOtpdigit3","minlength","1","maxlength","1","required","",3,"ngModelChange","keyup","ngModel"],["type","tel","name","loginOtpdigit4","minlength","1","maxlength","1","required","",3,"ngModelChange","keyup","ngModel"],["class","d-flex ion-align-items-center mt-2",4,"ngIf"],[1,"d-flex","ion-align-items-center","mt-2"],[1,"otp-relatives","no-sms"],[1,"ml-1","otp-relatives","resendOTP",3,"click"]],template:function(i,t){i&1&&(s(0,"ion-content"),C(1,He,13,3,"ng-container",7)(2,tt,22,6,"ng-container",7)(3,nt,28,7,"ng-container",7),l()),i&2&&(c(),u("ngIf",t.showLoginContainer),c(),u("ngIf",t.showPassContainer),c(),u("ngIf",t.showOTPContainer))},dependencies:[ee,te,ce,re,se,de,ge,pe,ue,le,ae,we,Oe,be,Ce,xe,ve,Pe,Ie,Se,Te,Me,Ee,ke,Ne,_e,me,he,fe,ye],styles:[".error-message[_ngcontent-%COMP%]{color:#f06850;font-size:9pt;display:block;margin:8pt 0}.close[_ngcontent-%COMP%]{float:right;font-size:20px;outline:none;padding:2px 6px}.otp-relatives[_ngcontent-%COMP%]{color:#364469;font-size:9pt;display:inline-block;margin:0}ion-input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]{font-size:12pt!important}.resendOTP[_ngcontent-%COMP%]{background-color:#364469;color:#fff;padding:2pt 4pt;display:inline-block;border-radius:2pt;margin-top:0;margin-left:8pt;cursor:pointer}.login-model-label[_ngcontent-%COMP%]{color:#364469;margin-bottom:8pt;display:block;font-size:16pt}.mobileNoMaindiv[_ngcontent-%COMP%]{display:flex;flex:1;align-items:baseline}.mobileNoMaindiv[_ngcontent-%COMP%]   .countryCode-select[_ngcontent-%COMP%]{padding:0}.mobileNoMaindiv[_ngcontent-%COMP%]   .item-small-text[_ngcontent-%COMP%]{flex:1}.mobileNoMaindiv[_ngcontent-%COMP%]   .item-small-text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:10px;color:#364469ad;display:block;margin-top:2pt}.mobileNoMaindiv[_ngcontent-%COMP%]   .mobileNumber-item[_ngcontent-%COMP%], .mobileNoMaindiv[_ngcontent-%COMP%]   .firstName-item[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1;--min-height: 24pt;font-size:10pt}.login-otp-button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.login-confirmation-btn[_ngcontent-%COMP%], .otp-confirmation-btn[_ngcontent-%COMP%]{margin:8px 8px 8px 0;height:40px;--box-shadow: none;font-weight:400;color:#fff;--background: #1a8cd2;--background-activated: #1a8cd2;--background-hover: #1a8cd2;--background-focused: #1a8cd2}.login-container[_ngcontent-%COMP%], .otp-container[_ngcontent-%COMP%], .otp-success-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.login-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%], .otp-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%], .otp-success-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{flex:1;position:relative}.otp-done[_ngcontent-%COMP%]{font-size:32pt;color:green;margin:16pt}.bounce-enter-active[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce-in .5s}.bounce-leave-active[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce-in .5s reverse}@keyframes _ngcontent-%COMP%_bounce-in{0%{transform:scale(0)}50%{transform:scale(1.5)}to{transform:scale(1)}}.or-divider[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:16pt 0;border-top:1px solid rgba(128,128,128,.6);position:relative}.or-divider[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;z-index:100000;display:block;left:43%;top:-10px;background:#fff;width:50px;text-align:center}form[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px}form[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-size:12px}form[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:14px!important}ion-toggle[_ngcontent-%COMP%]{--handle-background: #92989c;--checked-background: #d0d4d6;--background: rgb(236, 240, 245)}"]})}}return n})();export{T as a,N as b,vt as c,Ut as d,rt as e,ct as f};
