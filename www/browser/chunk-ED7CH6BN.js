import{b,c as k,d as x}from"./chunk-G6R5KQ73.js";import{b as y}from"./chunk-YDS7KU35.js";import{d as f}from"./chunk-5AT3KRLK.js";import{e as r,f as I,g as w,h as C,l as E}from"./chunk-3H4RQUCR.js";import{g as h,h as m}from"./chunk-B5PDLB3A.js";import{h as p}from"./chunk-B7O3QC5Z.js";var M=":host{padding-left:16px;padding-right:16px;padding-top:0px;padding-bottom:0px;height:200px;outline:none;font-size:22px;-webkit-scroll-snap-type:y mandatory;-ms-scroll-snap-type:y mandatory;scroll-snap-type:y mandatory;overflow-x:hidden;overflow-y:scroll;scrollbar-width:none;text-align:center}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px}}:host::-webkit-scrollbar{display:none}:host .picker-item{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;height:34px;border:0px;outline:none;background:transparent;color:inherit;font-family:var(--ion-font-family, inherit);font-size:inherit;line-height:34px;text-align:inherit;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;overflow:hidden;scroll-snap-align:center}:host .picker-item-empty,:host .picker-item.picker-item-disabled{scroll-snap-align:none;cursor:default}:host .picker-item.picker-item-disabled{opacity:0.4}:host(.picker-column-active) .picker-item.picker-item-active{color:var(--ion-color-base)}@media (any-hover: hover){:host(:focus){outline:none;background:rgba(var(--ion-color-base-rgb), 0.2)}}",S=":host{padding-left:16px;padding-right:16px;padding-top:0px;padding-bottom:0px;height:200px;outline:none;font-size:22px;-webkit-scroll-snap-type:y mandatory;-ms-scroll-snap-type:y mandatory;scroll-snap-type:y mandatory;overflow-x:hidden;overflow-y:scroll;scrollbar-width:none;text-align:center}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host{padding-left:unset;padding-right:unset;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px}}:host::-webkit-scrollbar{display:none}:host .picker-item{padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;height:34px;border:0px;outline:none;background:transparent;color:inherit;font-family:var(--ion-font-family, inherit);font-size:inherit;line-height:34px;text-align:inherit;text-overflow:ellipsis;white-space:nowrap;cursor:pointer;overflow:hidden;scroll-snap-align:center}:host .picker-item-empty,:host .picker-item.picker-item-disabled{scroll-snap-align:none;cursor:default}:host .picker-item.picker-item-disabled{opacity:0.4}:host(.picker-column-active) .picker-item.picker-item-active{color:var(--ion-color-base)}@media (any-hover: hover){:host(:focus){outline:none;background:rgba(var(--ion-color-base-rgb), 0.2)}}:host .picker-item-active{color:var(--ion-color-base)}",V=class{constructor(n){E(this,n),this.ionChange=C(this,"ionChange",7),this.isScrolling=!1,this.isColumnVisible=!1,this.canExitInputMode=!0,this.isActive=!1,this.items=[],this.color="primary",this.numericInput=!1,this.centerPickerItemInView=(e,t=!0,i=!0)=>{let{el:o,isColumnVisible:s}=this;if(s){let l=e.offsetTop-3*e.clientHeight+e.clientHeight/2;o.scrollTop!==l&&(this.canExitInputMode=i,o.scroll({top:l,left:0,behavior:t?"smooth":void 0}))}},this.inputModeChange=e=>{if(!this.numericInput)return;let{useInputMode:t,inputModeColumn:i}=e.detail,o=i===void 0||i===this.el;if(!t||!o){this.setInputModeActive(!1);return}this.setInputModeActive(!0)},this.setInputModeActive=e=>{if(this.isScrolling){this.scrollEndCallback=()=>{this.isActive=e};return}this.isActive=e},this.initializeScrollListener=()=>{let{el:e}=this,t,i=this.activeItem,o=()=>{m(()=>{t&&(clearTimeout(t),t=void 0),this.isScrolling||(b(),this.isScrolling=!0);let s=e.getBoundingClientRect(),l=s.x+s.width/2,d=s.y+s.height/2,a=e.shadowRoot.elementFromPoint(l,d);i!==null&&i.classList.remove(c),!(a===null||a.disabled)&&(a!==i&&(k(),this.canExitInputMode&&this.exitInputMode()),i=a,a.classList.add(c),t=setTimeout(()=>{this.isScrolling=!1,x();let{scrollEndCallback:u}=this;u&&(u(),this.scrollEndCallback=void 0),this.canExitInputMode=!0;let g=a.getAttribute("data-index");if(g===null)return;let A=parseInt(g,10),v=this.items[A];v.value!==this.value&&this.setValue(v.value)},250))})};m(()=>{e.addEventListener("scroll",o),this.destroyScrollListener=()=>{e.removeEventListener("scroll",o)}})},this.exitInputMode=()=>{let{parentEl:e}=this;e!=null&&(e.exitInputMode(),this.el.classList.remove("picker-column-active"))}}valueChange(){this.isColumnVisible&&this.scrollActiveItemIntoView()}componentWillLoad(){let n=t=>{var i;if(t[0].isIntersecting){this.isColumnVisible=!0;let s=h(this.el).querySelector(`.${c}`);s?.classList.remove(c),this.scrollActiveItemIntoView(),(i=this.activeItem)===null||i===void 0||i.classList.add(c),this.initializeScrollListener()}else this.isColumnVisible=!1,this.destroyScrollListener&&(this.destroyScrollListener(),this.destroyScrollListener=void 0)};new IntersectionObserver(n,{threshold:.001}).observe(this.el);let e=this.parentEl=this.el.closest("ion-picker-internal");e!==null&&e.addEventListener("ionInputModeChange",t=>this.inputModeChange(t))}componentDidRender(){var n;let{activeItem:e,items:t,isColumnVisible:i,value:o}=this;i&&(e?this.scrollActiveItemIntoView():((n=t[0])===null||n===void 0?void 0:n.value)!==o&&this.setValue(t[0].value))}scrollActiveItemIntoView(){return p(this,null,function*(){let n=this.activeItem;n&&this.centerPickerItemInView(n,!1,!1)})}setValue(n){return p(this,null,function*(){let{items:e}=this;this.value=n;let t=e.find(i=>i.value===n&&i.disabled!==!0);t&&this.ionChange.emit(t)})}get activeItem(){return h(this.el).querySelector(`.picker-item[data-value="${this.value}"]:not([disabled])`)}render(){let{items:n,color:e,isActive:t,numericInput:i}=this,o=f(this);return r(I,{tabindex:0,class:y(e,{[o]:!0,"picker-column-active":t,"picker-column-numeric-input":i})},r("div",{class:"picker-item picker-item-empty","aria-hidden":"true"},"\xA0"),r("div",{class:"picker-item picker-item-empty","aria-hidden":"true"},"\xA0"),r("div",{class:"picker-item picker-item-empty","aria-hidden":"true"},"\xA0"),n.map((s,l)=>r("button",{tabindex:"-1",class:{"picker-item":!0,"picker-item-disabled":s.disabled||!1},"data-value":s.value,"data-index":l,onClick:d=>{this.centerPickerItemInView(d.target,!0)},disabled:s.disabled},s.text)),r("div",{class:"picker-item picker-item-empty","aria-hidden":"true"},"\xA0"),r("div",{class:"picker-item picker-item-empty","aria-hidden":"true"},"\xA0"),r("div",{class:"picker-item picker-item-empty","aria-hidden":"true"},"\xA0"))}get el(){return w(this)}static get watchers(){return{value:["valueChange"]}}},c="picker-item-active";V.style={ios:M,md:S};export{V as ion_picker_column_internal};
