import{e as l,f,g as b,h as m,l as k}from"./chunk-3H4RQUCR.js";import{g}from"./chunk-B5PDLB3A.js";import{h as d}from"./chunk-B7O3QC5Z.js";var x=":host{display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:200px;direction:ltr;z-index:0}:host .picker-before,:host .picker-after{position:absolute;width:100%;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:1;pointer-events:none}:host .picker-before{left:0;top:0;height:83px}:host-context([dir=rtl]){left:unset;right:unset;right:0}:host .picker-after{left:0;top:116px;height:84px}:host-context([dir=rtl]){left:unset;right:unset;right:0}:host .picker-highlight{border-radius:8px;left:0;right:0;top:50%;bottom:0;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;position:absolute;width:calc(100% - 16px);height:34px;-webkit-transform:translateY(-50%);transform:translateY(-50%);z-index:-1}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host .picker-highlight{margin-left:unset;margin-right:unset;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}}:host input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host ::slotted(ion-picker-column-internal:first-of-type){text-align:start}:host ::slotted(ion-picker-column-internal:last-of-type){text-align:end}:host ::slotted(ion-picker-column-internal:only-child){text-align:center}:host .picker-before{background:-webkit-gradient(linear, left top, left bottom, color-stop(20%, var(--background, var(--ion-background-color, #fff))), to(rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0.8)));background:linear-gradient(to bottom, var(--background, var(--ion-background-color, #fff)) 20%, rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0.8) 100%)}:host .picker-after{background:-webkit-gradient(linear, left bottom, left top, color-stop(20%, var(--background, var(--ion-background-color, #fff))), to(rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0.8)));background:linear-gradient(to top, var(--background, var(--ion-background-color, #fff)) 20%, rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0.8) 100%)}:host .picker-highlight{background:var(--ion-color-step-150, #eeeeef)}",y=":host{display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:200px;direction:ltr;z-index:0}:host .picker-before,:host .picker-after{position:absolute;width:100%;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:1;pointer-events:none}:host .picker-before{left:0;top:0;height:83px}:host-context([dir=rtl]){left:unset;right:unset;right:0}:host .picker-after{left:0;top:116px;height:84px}:host-context([dir=rtl]){left:unset;right:unset;right:0}:host .picker-highlight{border-radius:8px;left:0;right:0;top:50%;bottom:0;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;position:absolute;width:calc(100% - 16px);height:34px;-webkit-transform:translateY(-50%);transform:translateY(-50%);z-index:-1}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){:host .picker-highlight{margin-left:unset;margin-right:unset;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto}}:host input{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;margin:0;padding:0;border:0;outline:0;clip:rect(0 0 0 0);opacity:0;overflow:hidden;-webkit-appearance:none;-moz-appearance:none}:host ::slotted(ion-picker-column-internal:first-of-type){text-align:start}:host ::slotted(ion-picker-column-internal:last-of-type){text-align:end}:host ::slotted(ion-picker-column-internal:only-child){text-align:center}:host .picker-before{background:-webkit-gradient(linear, left top, left bottom, color-stop(20%, var(--background, var(--ion-background-color, #fff))), color-stop(90%, rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0)));background:linear-gradient(to bottom, var(--background, var(--ion-background-color, #fff)) 20%, rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0) 90%)}:host .picker-after{background:-webkit-gradient(linear, left bottom, left top, color-stop(30%, var(--background, var(--ion-background-color, #fff))), color-stop(90%, rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0)));background:linear-gradient(to top, var(--background, var(--ion-background-color, #fff)) 30%, rgba(var(--background-rgb, var(--ion-background-color-rgb, 255, 255, 255)), 0) 90%)}",E=(()=>{let p=class{constructor(o){k(this,o),this.ionInputModeChange=m(this,"ionInputModeChange",7),this.useInputMode=!1,this.isInHighlightBounds=t=>{let{highlightEl:e}=this;if(!e)return!1;let n=e.getBoundingClientRect(),r=t.clientX<n.left||t.clientX>n.right,s=t.clientY<n.top||t.clientY>n.bottom;return!(r||s)},this.onFocusOut=t=>{let{relatedTarget:e}=t;(!e||e.tagName!=="ION-PICKER-COLUMN-INTERNAL"&&e!==this.inputEl)&&this.exitInputMode()},this.onFocusIn=t=>{let{target:e}=t;if(e.tagName==="ION-PICKER-COLUMN-INTERNAL"&&!this.actionOnClick){let n=e;n.numericInput?this.enterInputMode(n,!1):this.exitInputMode()}},this.onClick=()=>{let{actionOnClick:t}=this;t&&(t(),this.actionOnClick=void 0)},this.onPointerDown=t=>{let{useInputMode:e,inputModeColumn:n,el:r}=this;if(this.isInHighlightBounds(t)){if(e)t.target.tagName==="ION-PICKER-COLUMN-INTERNAL"?n&&n===t.target?this.actionOnClick=()=>{this.enterInputMode()}:this.actionOnClick=()=>{this.enterInputMode(t.target)}:this.actionOnClick=()=>{this.exitInputMode()};else{let i=r.querySelectorAll("ion-picker-column-internal.picker-column-numeric-input").length===1?t.target:void 0;this.actionOnClick=()=>{this.enterInputMode(i)}}return}this.actionOnClick=()=>{this.exitInputMode()}},this.enterInputMode=(t,e=!0)=>{let{inputEl:n,el:r}=this;!n||!r.querySelector("ion-picker-column-internal.picker-column-numeric-input")||(this.useInputMode=!0,this.inputModeColumn=t,e?(this.destroyKeypressListener&&(this.destroyKeypressListener(),this.destroyKeypressListener=void 0),n.focus()):(r.addEventListener("keypress",this.onKeyPress),this.destroyKeypressListener=()=>{r.removeEventListener("keypress",this.onKeyPress)}),this.emitInputModeChange())},this.onKeyPress=t=>{let{inputEl:e}=this;if(!e)return;let n=parseInt(t.key,10);Number.isNaN(n)||(e.value+=t.key,this.onInputChange())},this.selectSingleColumn=()=>{let{inputEl:t,inputModeColumn:e,singleColumnSearchTimeout:n}=this;if(!t||!e)return;let r=e.items.filter(i=>i.disabled!==!0);if(n&&clearTimeout(n),this.singleColumnSearchTimeout=setTimeout(()=>{t.value="",this.singleColumnSearchTimeout=void 0},1e3),t.value.length>=3){let i=t.value.length-2,a=t.value.substring(i);t.value=a,this.selectSingleColumn();return}let s=r.find(({text:i})=>i.replace(/^0+(?=[1-9])|0+(?=0$)/,"")===t.value);if(s){e.setValue(s.value);return}if(t.value.length===2){let i=t.value.substring(t.value.length-1);t.value=i,this.selectSingleColumn()}},this.searchColumn=(t,e,n="start")=>{let r=n==="start"?/^0+/:/0$/,s=t.items.find(({text:i,disabled:a})=>a!==!0&&i.replace(r,"")===e);s&&t.setValue(s.value)},this.selectMultiColumn=()=>{let{inputEl:t,el:e}=this;if(!t)return;let n=Array.from(e.querySelectorAll("ion-picker-column-internal")).filter(u=>u.numericInput),r=n[0],s=n[1],i=t.value,a;switch(i.length){case 1:this.searchColumn(r,i);break;case 2:let u=t.value.substring(0,1);i=u==="0"||u==="1"?t.value:u,this.searchColumn(r,i),i.length===1&&(a=t.value.substring(t.value.length-1),this.searchColumn(s,a,"end"));break;case 3:let c=t.value.substring(0,1);i=c==="0"||c==="1"?t.value.substring(0,2):c,this.searchColumn(r,i),a=i.length===1?t.value.substring(1):t.value.substring(2),this.searchColumn(s,a,"end");break;case 4:let h=t.value.substring(0,1);i=h==="0"||h==="1"?t.value.substring(0,2):h,this.searchColumn(r,i);let v=i.length===1?t.value.substring(1,t.value.length):t.value.substring(2,t.value.length);this.searchColumn(s,v,"end");break;default:let C=t.value.length-4,I=t.value.substring(C);t.value=I,this.selectMultiColumn();break}},this.onInputChange=()=>{let{useInputMode:t,inputEl:e,inputModeColumn:n}=this;!t||!e||(n?this.selectSingleColumn():this.selectMultiColumn())},this.emitInputModeChange=()=>{let{useInputMode:t,inputModeColumn:e}=this;this.ionInputModeChange.emit({useInputMode:t,inputModeColumn:e})}}preventTouchStartPropagation(o){o.stopPropagation()}componentWillLoad(){g(this.el).addEventListener("focusin",this.onFocusIn),g(this.el).addEventListener("focusout",this.onFocusOut)}exitInputMode(){return d(this,null,function*(){let{inputEl:o,useInputMode:t}=this;!t||!o||(this.useInputMode=!1,this.inputModeColumn=void 0,o.blur(),o.value="",this.destroyKeypressListener&&(this.destroyKeypressListener(),this.destroyKeypressListener=void 0),this.emitInputModeChange())})}render(){return l(f,{onPointerDown:o=>this.onPointerDown(o),onClick:()=>this.onClick()},l("input",{"aria-hidden":"true",tabindex:-1,inputmode:"numeric",type:"number",ref:o=>this.inputEl=o,onInput:()=>this.onInputChange(),onBlur:()=>this.exitInputMode()}),l("div",{class:"picker-before"}),l("div",{class:"picker-after"}),l("div",{class:"picker-highlight",ref:o=>this.highlightEl=o}),l("slot",null))}get el(){return b(this)}};return p.style={ios:x,md:y},p})();export{E as ion_picker_internal};
