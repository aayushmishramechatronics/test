import{a as u,d as h}from"./chunk-5AT3KRLK.js";import{c as S}from"./chunk-NVMJVCSP.js";import{b as g,e as E,f as y,g as A,k as O}from"./chunk-B5PDLB3A.js";import{h as c}from"./chunk-B7O3QC5Z.js";var v=0,b=new WeakMap,l=e=>({create(t){return L(e,t)},dismiss(t,o,s){return B(document,t,o,e,s)},getTop(){return c(this,null,function*(){return f(document,e)})}}),U=l("ion-alert"),Y=l("ion-action-sheet"),z=l("ion-loading"),Q=l("ion-modal");var V=l("ion-popover"),$=l("ion-toast"),J=e=>{typeof document<"u"&&q(document);let n=v++;e.overlayIndex=n,e.hasAttribute("id")||(e.id=`ion-overlay-${n}`)},L=(e,n)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(e).then(()=>{let t=document.createElement(e);return t.classList.add("overlay-hidden"),Object.assign(t,Object.assign(Object.assign({},n),{hasController:!0})),F(document).appendChild(t),new Promise(o=>g(t,o))}):Promise.resolve(),m='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',R=(e,n)=>{let t=e.querySelector(m),o=t?.shadowRoot;o&&(t=o.querySelector(m)||t),t?O(t):n.focus()},P=e=>e.classList.contains("overlay-hidden"),C=(e,n)=>{let t=Array.from(e.querySelectorAll(m)),o=t.length>0?t[t.length-1]:null,s=o?.shadowRoot;s&&(o=s.querySelector(m)||o),o?o.focus():n.focus()},I=(e,n)=>{let t=f(n,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),o=e.target;if(!t||!o||t.classList.contains("ion-disable-focus-trap"))return;let s=()=>{if(t===o)t.lastFocus=void 0;else{let a=A(t);if(!a.contains(o))return;let r=a.querySelector(".ion-overlay-wrapper");if(!r)return;if(r.contains(o))t.lastFocus=o;else{let d=t.lastFocus;R(r,t),d===n.activeElement&&C(r,t),t.lastFocus=n.activeElement}}},i=()=>{if(t.contains(o))t.lastFocus=o;else{let a=t.lastFocus;R(t,t),a===n.activeElement&&C(t,t),t.lastFocus=n.activeElement}};t.shadowRoot?i():s()},q=e=>{v===0&&(v=1,e.addEventListener("focus",n=>{I(n,e)},!0),e.addEventListener("ionBackButton",n=>{let t=f(e);t?.backdropDismiss&&n.detail.register(100,()=>t.dismiss(void 0,w))}),e.addEventListener("keyup",n=>{if(n.key==="Escape"){let t=f(e);t?.backdropDismiss&&t.dismiss(void 0,w)}}))},B=(e,n,t,o,s)=>{let i=f(e,o,s);return i?i.dismiss(n,t):Promise.reject("overlay does not exist")},_=(e,n)=>(n===void 0&&(n="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(e.querySelectorAll(n)).filter(t=>t.overlayIndex>0)),f=(e,n,t)=>{let o=_(e,n).filter(s=>!P(s));return t===void 0?o[o.length-1]:o.find(s=>s.id===t)},x=(e=!1)=>{let t=F(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))},X=(e,n,t,o,s)=>c(void 0,null,function*(){var i,a;if(e.presented)return;x(!0),e.presented=!0,e.willPresent.emit(),(i=e.willPresentShorthand)===null||i===void 0||i.emit();let r=h(e),d=e.enterAnimation?e.enterAnimation:u.get(n,r==="ios"?t:o);(yield k(e,d,e.el,s))&&(e.didPresent.emit(),(a=e.didPresentShorthand)===null||a===void 0||a.emit()),e.el.tagName!=="ION-TOAST"&&j(e.el),e.keyboardClose&&(document.activeElement===null||!e.el.contains(document.activeElement))&&e.el.focus()}),j=e=>c(void 0,null,function*(){let n=document.activeElement;if(!n)return;let t=n?.shadowRoot;t&&(n=t.querySelector(m)||n),yield e.onDidDismiss(),n.focus()}),Z=(e,n,t,o,s,i,a)=>c(void 0,null,function*(){var r,d;if(!e.presented)return!1;x(!1),e.presented=!1;try{e.el.style.setProperty("pointer-events","none"),e.willDismiss.emit({data:n,role:t}),(r=e.willDismissShorthand)===null||r===void 0||r.emit({data:n,role:t});let p=h(e),D=e.leaveAnimation?e.leaveAnimation:u.get(o,p==="ios"?s:i);t!==K&&(yield k(e,D,e.el,a)),e.didDismiss.emit({data:n,role:t}),(d=e.didDismissShorthand)===null||d===void 0||d.emit({data:n,role:t}),b.delete(e),e.el.classList.add("overlay-hidden"),e.el.style.removeProperty("pointer-events"),e.el.lastFocus!==void 0&&(e.el.lastFocus=void 0)}catch(p){console.error(p)}return e.el.remove(),!0}),F=e=>e.querySelector("ion-app")||e.body,k=(e,n,t,o)=>c(void 0,null,function*(){t.classList.remove("overlay-hidden");let s=e.el,i=n(s,o);(!e.animated||!u.getBoolean("animated",!0))&&i.duration(0),e.keyboardClose&&i.beforeAddWrite(()=>{let r=t.ownerDocument.activeElement;r?.matches("input,ion-input, ion-textarea")&&r.blur()});let a=b.get(e)||[];return b.set(e,[...a,i]),yield i.play(),!0}),N=(e,n)=>{let t,o=new Promise(s=>t=s);return T(e,n,s=>{t(s.detail)}),o},T=(e,n,t)=>{let o=s=>{y(e,n,o),t(s)};E(e,n,o)},ee=e=>e==="cancel"||e===w,G=e=>e(),te=(e,n)=>{if(typeof e=="function")return u.get("_zoneGate",G)(()=>{try{return e(n)}catch(o){throw o}})},w="backdrop",K="gesture";export{b as a,U as b,Y as c,z as d,Q as e,V as f,$ as g,J as h,R as i,f as j,X as k,Z as l,N as m,ee as n,te as o,w as p,K as q};
