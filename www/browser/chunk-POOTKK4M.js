import{a as rt}from"./chunk-J6SZS6L3.js";import{a as tt}from"./chunk-GQMNTOSR.js";import{e as et}from"./chunk-RXYPHCWN.js";import{b as Z}from"./chunk-DZKO2NLF.js";import{Aa as g,Ba as b,D as O,Dc as W,Ec as K,G as I,H as k,Hc as Q,Kc as X,Lb as L,M as x,N as h,Oa as D,Qa as T,Ra as B,Tb as Y,Yb as $,Za as N,Zb as F,_a as A,ab as V,ac as q,ca as r,cc as G,da as f,db as R,eb as z,gc as H,ia as _,ka as d,la as i,ma as e,mc as J,na as P,qa as w,ra as S,rb as U,sa as p,ta as c,tb as j,wb as E,ya as y,za as a}from"./chunk-W2VBRA3B.js";import"./chunk-LWCOZOPT.js";import"./chunk-AZEL22PK.js";import"./chunk-B2H4I2WB.js";import"./chunk-HKZ2SCPE.js";import"./chunk-S4NCJKJW.js";import"./chunk-XOCRRRHP.js";import"./chunk-7UHV3KU6.js";import"./chunk-3ZBATJJW.js";import"./chunk-XE6OGKVL.js";import"./chunk-5AT3KRLK.js";import"./chunk-B2IEJXTH.js";import"./chunk-UBSOUGXN.js";import"./chunk-NVMJVCSP.js";import"./chunk-3H4RQUCR.js";import"./chunk-B5PDLB3A.js";import{g as st,h as v}from"./chunk-B7O3QC5Z.js";var M=st(rt());function lt(o,C){if(o&1&&(i(0,"td",19)(1,"ion-label",36),a(2),e()()),o&2){let t=c().$implicit,s=c();r(2),g(s.vendorDeatil.conceirge?"":"Verification Code:"+t.verifyCode)}}function ct(o,C){o&1&&w(0)}function dt(o,C){if(o&1&&(i(0,"div",37),_(1,ct,1,0,"ng-container",38),e()),o&2){c();let t=y(61);r(),d("ngTemplateOutlet",t)}}function mt(o,C){o&1&&w(0)}function ut(o,C){if(o&1&&(i(0,"div",37),_(1,mt,1,0,"ng-container",38),e()),o&2){c();let t=y(61);r(),d("ngTemplateOutlet",t)}}function pt(o,C){if(o&1){let t=S();i(0,"ion-icon",39),p("click",function(){x(t);let n=c().$implicit;return h(n.options=!1)}),e(),i(1,"ul")(2,"li")(3,"button",40),p("click",function(){x(t);let n=c(),l=n.$implicit,m=n.index,u=c();return h(u.statusUpdate(l,"IN_PROGRESS",m))}),a(4,"In Progress"),e()(),i(5,"li")(6,"button",40),p("click",function(){x(t);let n=c(),l=n.$implicit,m=n.index,u=c();return h(u.statusUpdate(l,"COMPLETED",m))}),a(7,"Completed"),e()(),i(8,"li")(9,"button",40),p("click",function(){x(t);let n=c(),l=n.$implicit,m=n.index,u=c();return h(u.confirmCancelAppointment(l,m))}),a(10,"Cancel Request"),e()()()}if(o&2){let t=c().$implicit;r(3),d("disabled",t.bookingStatus==="COMPLETED"),r(3),d("disabled",t.bookingStatus==="COMPLETED"),r(3),d("disabled",t.bookingStatus==="COMPLETED")}}function gt(o,C){if(o&1){let t=S();i(0,"tr")(1,"td",15)(2,"div",16),a(3),e()(),i(4,"td",17),a(5),e(),i(6,"td",18),a(7),e(),i(8,"td",17),a(9),e(),i(10,"td",17),a(11),P(12,"br"),a(13),e(),i(14,"td",19),a(15),e(),_(16,lt,3,1,"td",22),i(17,"td",18)(18,"div",23)(19,"ion-label",24)(20,"span",25),a(21),e()(),i(22,"div",26)(23,"ion-button",27),p("click",function(){let n=x(t).$implicit;return h(n.options=!n.options)}),P(24,"ion-icon",28),e()(),_(25,dt,2,1,"div",29),e()(),i(26,"td",30)(27,"div",31)(28,"ion-label",32)(29,"b"),a(30,"Customer Name:- "),e(),a(31),e(),i(32,"ion-label",32)(33,"b"),a(34,"Phone Number:- "),e(),a(35),e(),i(36,"ion-label",32)(37,"b"),a(38,"Slot Time:-"),e(),a(39),e(),i(40,"ion-label",32)(41,"b"),a(42,"Room Number:- "),e(),a(43),e(),i(44,"ion-label",32)(45,"b"),a(46,"Booked Service"),e(),a(47),e(),i(48,"ion-label",32),a(49),e(),i(50,"div",33)(51,"div",34)(52,"ion-label",35)(53,"span",25),a(54),e()()()(),i(55,"div",23)(56,"div",26)(57,"ion-button",27),p("click",function(){let n=x(t).$implicit;return h(n.options=!n.options)}),P(58,"ion-icon",28),e()(),_(59,ut,2,1,"div",29),e()()(),_(60,pt,11,3,"ng-template",null,0,B),e()}if(o&2){let t=C.$implicit,s=c();r(3),b(" ",t.CustomerName," "),r(2),b(" ",t.CustomerPhoneNumber," "),r(2),b(" ",t.slotTime," "),r(2),b(" ",t.room_no?t.room_no:"-"," "),r(2),b(" ",t.bookedService,""),r(2),b(" ",t.storeName," "),r(2),b(" ",t.comments," "),r(),d("ngIf",!s.vendorDeatil.conceirge),r(4),d("className",t.bookingStatus?"consultation-status-tag "+t.bookingStatus:"consultation-status-tag new"),r(),g(t.bookingStatus?t.bookingStatus:"New"),r(4),d("ngIf",t.options),r(6),g(t.CustomerName),r(4),g(t.CustomerPhoneNumber),r(4),g(t.slotTime),r(4),g(t.room_no),r(4),g(t.bookedService),r(2),g(s.vendorDeatil.conceirge?"":"Verification Code:"+t.verifyCode),r(4),d("className",t.bookingStatus?"consultation-status-tag "+t.bookingStatus:"consultation-status-tag new"),r(),g(t.bookingStatus?t.bookingStatus:"New"),r(5),d("ngIf",t.options)}}function _t(o,C){o&1&&(i(0,"div",41),a(1," There are no pending appointments "),e())}var it=(()=>{class o{constructor(t,s,n,l,m,u,at){this.appService=t,this.activatedRoute=s,this.router=n,this.utilAlertService=l,this.loadingController=m,this.popoverController=u,this.alertController=at,this.bookedCustomers=[],this.selectedDate=new Date}ngOnInit(){}ionViewWillEnter(){this.getUserDetail(),this.getVendorDeatil(),this.user=JSON.parse(localStorage.getItem("user")),this.activatedRoute.params.subscribe(t=>{t&&(this.storeId=t.id,this.storeId?this.selectedUser=this.user.shops.find(s=>s.phonenumber===this.storeId):this.selectedUser=this.user,this.selectedUser&&this.search())})}selectPreviousDate(){this.selectedDate=(0,M.default)(this.selectedDate).subtract(1,"days"),this.bookedCustomers=[],this.search()}selectNextDate(){this.selectedDate=(0,M.default)(this.selectedDate).add(1,"days"),this.bookedCustomers=[],this.search()}search(){return v(this,null,function*(){let t=yield this.loadingController.create({message:"Loading..."});yield t.present();let s={userType:this.selectedUser.type,userId:this.selectedUser.userId,date:(0,M.default)(this.selectedDate).format("DD-MM-YYYY")};this.bookedCustomers=[],this.appService.getBookedCustomerList(s).subscribe(n=>{t.dismiss(),n&&n.body&&(this.bookedCustomers=n.body)},()=>{t.dismiss()})})}createAppointment(){this.selectedUser&&this.selectedUser.loginId&&this.router.navigate(["/stores",this.selectedUser.loginId],{queryParams:{adminCreated:!0}})}statusUpdate(t,s,n){return v(this,null,function*(){t.options=!1;let l=yield this.loadingController.create({message:"Loading..."});yield l.present();let m={idBooking:t.idBooking,status:s};this.appService.updateStatus(m).subscribe(u=>{u&&u.body&&(l.dismiss(),this.bookedCustomers[n].bookingStatus=u.body.status,this.utilAlertService.showSuccess("Your slot status updated successfully"))},()=>{l.dismiss()})})}confirmCancelAppointment(t,s){return v(this,null,function*(){t.options=!1,yield(yield this.alertController.create({cssClass:"my-custom-class",header:"Confirm!",message:"Are you sure you want to cancel this request?",buttons:[{text:"Cancel",role:"cancel",cssClass:"secondary",handler:l=>{}},{text:"Confirm",handler:()=>{this.cancelAppointment(t,s)}}]})).present()})}cancelAppointment(t,s){return v(this,null,function*(){let n=yield this.loadingController.create({message:"Loading..."});yield n.present();let l={bookingId:t.idBooking};this.appService.cancelSlot(l).subscribe(m=>{m&&m.body&&(n.dismiss(),this.bookedCustomers.splice(s,1),this.utilAlertService.showSuccess("Your slot is cancelled"))},()=>{n.dismiss()})})}getUserDetail(){this.appService.userDetail.subscribe(t=>{this.user=t,this.selectedUser=t})}getVendorDeatil(){this.appService.vendorDeatil.subscribe(t=>{this.vendorDeatil=t})}editShop(){this.router.navigate(["/shop-keeper"])}isTodayCheck(){let t=(0,M.default)(new Date).format("DD-MM-YYYY"),s=(0,M.default)(this.selectedDate).format("DD-MM-YYYY");return t===s}static{this.\u0275fac=function(s){return new(s||o)(f(Z),f(U),f(j),f(tt),f(K),f(Q),f(W))}}static{this.\u0275cmp=I({type:o,selectors:[["app-booked-customers"]],decls:39,vars:6,consts:[["statusList",""],[1,"theme-bg-content-area"],[1,"container"],[1,"d-block",2,"text-align","right","margin","8pt 16pt","display","flex","justify-content","flex-end","align-items","center"],["tappable","","fill","outline",1,"pay-now-btn",3,"click"],["name","refresh-circle-outline"],[1,"date-selection"],["fill","clear","size","small",3,"click"],["slot","icon-only","name","chevron-back-sharp"],[1,"slots-showing-day"],["slot","icon-only","name","chevron-forward-sharp"],[1,"consultation-list-container","p-0"],[1,"p-0",2,"width","100%"],["size","12",1,"p-0"],[1,"consultation-table"],[1,"availability-column","ion-hide-sm-down",2,"width","15%"],[1,"d-flex","align-items-center"],[1,"ion-hide-sm-down",2,"width","15%"],[1,"ion-hide-sm-down",2,"width","10%"],[1,"ion-hide-sm-down",2,"width","20%"],[4,"ngFor","ngForOf"],["class","no-result",4,"ngIf"],["style","width: 20%;","class","ion-hide-sm-down",4,"ngIf"],[1,"action-container"],[1,"ion-text-wrap","mr-1",2,"min-width","200px"],[3,"className"],[1,"options"],["slot","end","tappable","","strong","true","fill","block",1,"menu-btn",3,"click"],["name","ellipsis-vertical"],["class","status-popover",4,"ngIf"],[1,"ion-hide-sm-up",2,"width","97%","padding-top","0"],[1,"mobile-view-contaner"],[1,"name"],[1,"status"],[1,"d-flex"],[1,"ion-text-wrap","mr-1"],[1,"ion-text-wrap"],[1,"status-popover"],[4,"ngTemplateOutlet"],["name","close",3,"click"],[3,"click","disabled"],[1,"no-result"]],template:function(s,n){s&1&&(i(0,"ion-content",1)(1,"div",2)(2,"div",3)(3,"ion-button",4),p("click",function(){return n.createAppointment()}),i(4,"span"),a(5,"Create Appointment"),e()(),i(6,"ion-button",4),p("click",function(){return n.search()}),P(7,"ion-icon",5),e()(),i(8,"div",6)(9,"ion-button",7),p("click",function(){return n.selectPreviousDate()}),P(10,"ion-icon",8),e(),i(11,"ion-label",9),a(12),D(13,"date"),e(),i(14,"ion-button",7),p("click",function(){return n.selectNextDate()}),P(15,"ion-icon",10),e()(),i(16,"ion-grid",11)(17,"ion-row",12)(18,"ion-col",13)(19,"table",14)(20,"tbody")(21,"tr")(22,"td",15)(23,"div",16),a(24,"Customer Name"),e()(),i(25,"td",17),a(26," Phone Number "),e(),i(27,"td",18),a(28," Slot Time "),e(),i(29,"td",17),a(30," Room Number "),e(),i(31,"td",17),a(32," Booked Service "),e(),i(33,"td",19),a(34," Comments "),e(),i(35,"td",18),a(36," Status "),e()(),_(37,gt,62,20,"tr",20),e()(),_(38,_t,2,0,"div",21),e()()()()()),s&2&&(r(12),g(T(13,3,n.selectedDate,"EE, MMMM d, yyyy")),r(25),d("ngForOf",n.bookedCustomers),r(),d("ngIf",n.bookedCustomers&&n.bookedCustomers.length===0))},dependencies:[N,A,V,Y,$,F,q,G,H,J,R],styles:[".booked-customer-list[_ngcontent-%COMP%]   .booked-customer-item[_ngcontent-%COMP%]{font-size:9pt;color:#414141;font-weight:400;--min-height: 32px}.booked-customer-list[_ngcontent-%COMP%]   .booked-customer-item[_ngcontent-%COMP%]   --padding[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{display:flex;align-items:center}.date-selection[_ngcontent-%COMP%]{display:flex;margin:4pt 0;justify-content:space-between;align-items:center}.date-selection[_ngcontent-%COMP%]   .slots-showing-day[_ngcontent-%COMP%]{font-size:12pt;color:#414141}.today[_ngcontent-%COMP%]{background-color:#000}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]{font-size:9pt;color:#414141;font-weight:400;--min-height: 32px}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   .name-label[_ngcontent-%COMP%]{display:flex;align-items:center}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   .name-label[_ngcontent-%COMP%]   .available-icon[_ngcontent-%COMP%]{color:#3cb371}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   --padding[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{display:flex;align-items:center}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]{min-height:15px;font-size:7pt;font-weight:500;margin:0;--padding-start: 4px;--padding-end: 4px;--padding-top: 0px;--padding-bottom: 0px;line-height:unset;--border-radius: 3px;color:#f3f3f3}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:18px}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   .start-btn.old[_ngcontent-%COMP%]{--background: lightgrey}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   .download-btn[_ngcontent-%COMP%]{min-height:15px;font-size:7pt;font-weight:500;margin:0;--padding-start: 4px;--padding-end: 4px;--padding-top: 0px;--padding-bottom: 0px;line-height:unset;--border-radius: 3px;--background: #747474;color:#f3f3f3}.consultation-list[_ngcontent-%COMP%]   .consultation-item.today[_ngcontent-%COMP%]   .start-btn[_ngcontent-%COMP%]{--background: mediumseagreen}.consultation-list[_ngcontent-%COMP%]   .consultation-item[_ngcontent-%COMP%]   .age[_ngcontent-%COMP%]{font-size:80%}.text-right[_ngcontent-%COMP%]{text-align:right}.options[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;width:100%}.options[_ngcontent-%COMP%]   .menu-btn[_ngcontent-%COMP%]{font-size:9pt;--background: transparent;color:#414141;--background-hover: transparent}.appt-default-button[_ngcontent-%COMP%]{font-size:14px;--background: #ffffff;--border-width: 1px;--border-radius: 14px !important;--padding-start: 14px;--padding-end: 14px;--padding-top: 0px;--padding-bottom: 0px;--background-hover: #2cd18a;--background-hover-opacity: 1;--background-activated: #2cd18a;--box-shadow: none;height:28px;min-width:112px;line-height:normal;margin-left:4pt;font-weight:600}.appt-default-button[_ngcontent-%COMP%]   .button-label[_ngcontent-%COMP%]{text-transform:none}.appt-default-button.book-btn[_ngcontent-%COMP%]{--border-color: #2cd18a;color:#414141}.appt-default-button.other-btn[_ngcontent-%COMP%]{--border-color: #b1b1b1;color:#414141}.appt-default-button[_ngcontent-%COMP%]:hover{color:#fff}.consultation-list-container[_ngcontent-%COMP%]{padding:0 40px}.consultation-list-container[_ngcontent-%COMP%]   .consultation-table[_ngcontent-%COMP%]{width:100%}.consultation-list-container[_ngcontent-%COMP%]   .consultation-table[_ngcontent-%COMP%]   .today[_ngcontent-%COMP%]{background-color:#fafafa}.consultation-list-container[_ngcontent-%COMP%]   .consultation-table[_ngcontent-%COMP%]   .value-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.consultation-list-container[_ngcontent-%COMP%]   .consultation-table[_ngcontent-%COMP%]   .value-label[_ngcontent-%COMP%]{font-size:14px;color:#414141}.consultation-list-container[_ngcontent-%COMP%]   .consultation-table[_ngcontent-%COMP%]   .text-small[_ngcontent-%COMP%]{font-size:13px;color:#717171}.consultation-list-container[_ngcontent-%COMP%]   .consultation-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #eae8e8}.consultation-list-container[_ngcontent-%COMP%]   .consultation-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px}.consultation-list-container[_ngcontent-%COMP%]   .action-container[_ngcontent-%COMP%]{display:flex;align-items:center}.consultation-list-container[_ngcontent-%COMP%]   .mobile-view-contaner[_ngcontent-%COMP%]{display:flex;flex-direction:column}.consultation-list-container[_ngcontent-%COMP%]   .mobile-view-contaner[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:14px;color:#414141;line-height:20px}.consultation-list-container[_ngcontent-%COMP%]   .mobile-view-contaner[_ngcontent-%COMP%]   .patient-name[_ngcontent-%COMP%]{font-size:14px;color:#717171;line-height:20px;word-break:break-word}.consultation-list-container[_ngcontent-%COMP%]   .mobile-view-contaner[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{color:#717171;font-size:12px;line-height:20px}.consultation-list-container[_ngcontent-%COMP%]   .mobile-view-contaner[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{display:flex}.consultation-list-container[_ngcontent-%COMP%]   .no-result[_ngcontent-%COMP%]{color:#df5e57;padding:8px;display:flex;justify-content:center}.consultation-status-tag[_ngcontent-%COMP%]{padding:2px 8px;border-radius:2px;font-size:11px;font-weight:600}.consultation-status-tag.new[_ngcontent-%COMP%]{color:#fff;background:#3688cb}.consultation-status-tag.PENDING[_ngcontent-%COMP%]{color:#fff;background:#9a92c9}.consultation-status-tag.SCHEDULED[_ngcontent-%COMP%]{color:#fff;background:#3688cb}.consultation-status-tag.IN_PROGRESS[_ngcontent-%COMP%]{color:#fff;background:#e88231}.consultation-status-tag.COMPLETED[_ngcontent-%COMP%]{color:#fff;background:#4f8b46}"]})}}return o})();var Ct=[{path:"",component:it}],ot=(()=>{class o{static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275mod=k({type:o})}static{this.\u0275inj=O({imports:[E.forChild(Ct),E]})}}return o})();var zt=(()=>{class o{static{this.\u0275fac=function(s){return new(s||o)}}static{this.\u0275mod=k({type:o})}static{this.\u0275inj=O({imports:[z,L,X,et,ot]})}}return o})();export{zt as BookedCustomersPageModule};
