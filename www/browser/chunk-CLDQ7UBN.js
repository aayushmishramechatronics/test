import{a as J}from"./chunk-GQMNTOSR.js";import{c as W,e as H}from"./chunk-RXYPHCWN.js";import{b as $}from"./chunk-DZKO2NLF.js";import{Aa as f,Ba as k,Bc as G,D as m,Ec as q,G as I,H as u,Ja as _,Kc as B,Lb as L,M as g,N as b,Oa as C,Pa as D,Tb as N,Yb as V,Za as U,Zb as A,_a as P,ac as R,ca as s,da as p,eb as M,fc as j,gc as O,hc as T,ia as S,ka as c,la as n,ma as r,mc as z,ra as v,sa as d,ta as h,tb as E,ub as F,wb as x,za as a}from"./chunk-W2VBRA3B.js";import"./chunk-LWCOZOPT.js";import"./chunk-AZEL22PK.js";import"./chunk-B2H4I2WB.js";import"./chunk-HKZ2SCPE.js";import"./chunk-S4NCJKJW.js";import"./chunk-XOCRRRHP.js";import"./chunk-7UHV3KU6.js";import"./chunk-3ZBATJJW.js";import"./chunk-XE6OGKVL.js";import"./chunk-5AT3KRLK.js";import"./chunk-B2IEJXTH.js";import"./chunk-UBSOUGXN.js";import"./chunk-NVMJVCSP.js";import"./chunk-3H4RQUCR.js";import"./chunk-B5PDLB3A.js";import{h as y}from"./chunk-B7O3QC5Z.js";var Z=t=>["/booked-customers",t],ee=t=>["/shop-keeper",t];function te(t,w){if(t&1){let e=v();n(0,"ion-button",5),d("click",function(){g(e);let i=h();return b(i.addGuest())}),n(1,"span"),a(2,"Add Guest"),r()()}}function ie(t,w){if(t&1){let e=v();n(0,"ion-item",6)(1,"ion-grid")(2,"ion-row")(3,"ion-col",7)(4,"ion-label",8),a(5),r()(),n(6,"ion-col",7)(7,"ion-label",8),a(8),r()(),n(9,"ion-col",7)(10,"ion-label",8),a(11),C(12,"parseNumber"),r()(),n(13,"ion-col")(14,"ion-button",9)(15,"span"),a(16,"View Request"),r()(),n(17,"ion-button",9)(18,"span"),a(19,"Edit"),r()(),n(20,"ion-button",10),d("click",function(){let i=g(e).$implicit,l=h();return b(l.deleteShop(i))}),n(21,"span"),a(22,"Delete"),r()()()()()()}if(t&2){let e=w.$implicit,o=h();s(5),f(e.name),s(3),f(e.description),s(3),f(o.vendorDeatil.conceirge?"":D(12,5,e.phonenumber)),s(3),c("routerLink",_(7,Z,e.phonenumber)),s(3),c("routerLink",_(9,ee,e.phonenumber))}}var Q=(()=>{class t{constructor(e,o,i,l){this.appService=e,this.router=o,this.loadingController=i,this.utilAlertService=l,this.userShops=[],this.getUserDetail(),this.getVendorDetail()}ngOnInit(){}ionViewWillEnter(){}getUserDetail(){this.appService.userDetail.subscribe(e=>{this.user=e,e&&(this.userShops=this.user.shops)})}getVendorDetail(){this.appService.vendorDeatil.subscribe(e=>{this.vendorDeatil=e})}addShop(){return y(this,null,function*(){if(this.user){let e=yield this.loadingController.create({message:"Loading..."});yield e.present();let o={name:"",description:"",phonenumber:this.user.phonenumber+"_new",idCategory:this.vendorDeatil.idCategory,password:"",type:"S"};this.appService.signup(o).subscribe(i=>{i&&i.body&&(e.dismiss(),this.user.shops.push(i.body),localStorage.setItem("user",JSON.stringify(this.user)),this.appService.setUserDetail(this.user),this.router.navigate(["/shop-keeper",i.body.phonenumber]))})}else this.utilAlertService.showAlert("Internel server error! Please try after some time")})}addGuest(){this.router.navigate(["/guest"])}viewGuests(){this.router.navigate(["/guests-list"])}deleteShop(e){let o={query:e.userId};this.appService.deleteShop(o).subscribe(i=>{this.getUserDetail();let l=this.userShops.findIndex(Y=>Y.userId===i);l!==-1&&(this.userShops.splice(l,1),this.user.shops=this.userShops,this.appService.setUserDetail(this.user))})}static{this.\u0275fac=function(o){return new(o||t)(p($),p(E),p(q),p(J))}}static{this.\u0275cmp=I({type:t,selectors:[["app-user-shops"]],decls:9,vars:3,consts:[[1,"container"],[1,"pay-now-btn-fill",3,"click"],["tappable","","class","pay-now-btn ml-2","fill","outline",3,"click",4,"ngIf"],[1,"booked-customer-list",2,"display","block"],["class","booked-customer-item",4,"ngFor","ngForOf"],["tappable","","fill","outline",1,"pay-now-btn","ml-2",3,"click"],[1,"booked-customer-item"],["size-xs","12","size-sm","12","size-md","6","size-lg","3"],[1,"ion-text-wrap"],["tappable","","fill","outline",1,"pay-now-btn",3,"routerLink"],["tappable","","fill","outline",1,"pay-now-btn",3,"click"]],template:function(o,i){o&1&&(n(0,"ion-content")(1,"div",0)(2,"ion-item")(3,"ion-button",1),d("click",function(){return i.addShop()}),n(4,"span"),a(5),r()(),S(6,te,3,0,"ion-button",2),r(),n(7,"ion-list",3),S(8,ie,23,11,"ion-item",4),r()()()),o&2&&(s(5),k("Add New ",i.vendorDeatil?i.vendorDeatil.serviceLabel:"Service",""),s(),c("ngIf",(i.user==null?null:i.user.name)==="Front Desk"),s(2),c("ngForOf",i.userShops))},dependencies:[U,P,N,V,A,R,j,O,T,z,G,F,W],styles:[".v-divider[_ngcontent-%COMP%]{width:1px!important;padding:0;font-size:1px;-webkit-box-flex:0;flex:none;max-width:1px!important;border-right:1px solid #dcdcdc}.pay-now-btn-fill[_ngcontent-%COMP%]{--background: #1a8cd2;--color: white}"]})}}return t})();var oe=[{path:"",component:Q}],X=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=u({type:t})}static{this.\u0275inj=m({imports:[x.forChild(oe),x]})}}return t})();var Ce=(()=>{class t{static{this.\u0275fac=function(o){return new(o||t)}}static{this.\u0275mod=u({type:t})}static{this.\u0275inj=m({imports:[M,L,B,H,X]})}}return t})();export{Ce as UserShopsPageModule};
