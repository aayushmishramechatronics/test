"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1997],{1997:(I,u,o)=>{o.r(u),o.d(u,{UserShopsPageModule:()=>j});var c=o(177),d=o(9417),a=o(4654),l=o(9025),m=o(467),b=o(7366),e=o(8699),g=o(8312),f=o(6443);function v(s,h){if(1&s){const t=e.RV6();e.j41(0,"ion-button",5),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addGuest())}),e.j41(1,"span"),e.EFF(2,"Add Guest"),e.k0s()()}}const S=function(s){return["/booked-customers",s]},y=function(s){return["/shop-keeper",s]};function k(s,h){if(1&s){const t=e.RV6();e.j41(0,"ion-item",6)(1,"ion-grid")(2,"ion-row")(3,"ion-col",7)(4,"ion-label",8),e.EFF(5),e.k0s()(),e.j41(6,"ion-col",7)(7,"ion-label",8),e.EFF(8),e.k0s()(),e.j41(9,"ion-col",7)(10,"ion-label",8),e.EFF(11),e.nI1(12,"parseNumber"),e.k0s()(),e.j41(13,"ion-col")(14,"ion-button",9)(15,"span"),e.EFF(16,"View Request"),e.k0s()(),e.j41(17,"ion-button",9)(18,"span"),e.EFF(19,"Edit"),e.k0s()(),e.j41(20,"ion-button",10),e.bIt("click",function(){const r=e.eBV(t).$implicit,p=e.XpG();return e.Njj(p.deleteShop(r))}),e.j41(21,"span"),e.EFF(22,"Delete"),e.k0s()()()()()()}if(2&s){const t=h.$implicit,i=e.XpG();e.R7$(5),e.JRh(t.name),e.R7$(3),e.JRh(t.description),e.R7$(3),e.JRh(i.vendorDeatil.conceirge?"":e.bMT(12,5,t.phonenumber)),e.R7$(3),e.Y8G("routerLink",e.eq3(7,S,t.phonenumber)),e.R7$(3),e.Y8G("routerLink",e.eq3(9,y,t.phonenumber))}}const F=[{path:"",component:(()=>{class s{constructor(t,i,n,r){this.appService=t,this.router=i,this.loadingController=n,this.utilAlertService=r,this.userShops=[],this.getUserDetail(),this.getVendorDetail()}ngOnInit(){}ionViewWillEnter(){}getUserDetail(){this.appService.userDetail.subscribe(t=>{this.user=t,t&&(this.userShops=this.user.shops)})}getVendorDetail(){this.appService.vendorDeatil.subscribe(t=>{this.vendorDeatil=t})}addShop(){var t=this;return(0,m.A)(function*(){if(t.user){const i=yield t.loadingController.create({message:"Loading..."});yield i.present(),t.appService.signup({name:"",description:"",phonenumber:t.user.phonenumber+"_new",idCategory:t.vendorDeatil.idCategory,password:"",type:"S"}).subscribe(r=>{r&&r.body&&(i.dismiss(),t.user.shops.push(r.body),localStorage.setItem("user",JSON.stringify(t.user)),t.appService.setUserDetail(t.user),t.router.navigate(["/shop-keeper",r.body.phonenumber]))})}else t.utilAlertService.showAlert("Internel server error! Please try after some time")})()}addGuest(){this.router.navigate(["/guest"])}viewGuests(){this.router.navigate(["/guests-list"])}deleteShop(t){this.appService.deleteShop({query:t.userId}).subscribe(n=>{this.getUserDetail();const r=this.userShops.findIndex(p=>p.userId===n);-1!==r&&(this.userShops.splice(r,1),this.user.shops=this.userShops,this.appService.setUserDetail(this.user))})}static{this.\u0275fac=function(i){return new(i||s)(e.rXU(b.d),e.rXU(l.Ix),e.rXU(a.Xi),e.rXU(g.e))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-user-shops"]],decls:9,vars:3,consts:[[1,"container"],[1,"pay-now-btn-fill",3,"click"],["tappable","","class","pay-now-btn ml-2","fill","outline",3,"click",4,"ngIf"],[1,"booked-customer-list",2,"display","block"],["class","booked-customer-item",4,"ngFor","ngForOf"],["tappable","","fill","outline",1,"pay-now-btn","ml-2",3,"click"],[1,"booked-customer-item"],["size-xs","12","size-sm","12","size-md","6","size-lg","3"],[1,"ion-text-wrap"],["tappable","","fill","outline",1,"pay-now-btn",3,"routerLink"],["tappable","","fill","outline",1,"pay-now-btn",3,"click"]],template:function(i,n){1&i&&(e.j41(0,"ion-content")(1,"div",0)(2,"ion-item")(3,"ion-button",1),e.bIt("click",function(){return n.addShop()}),e.j41(4,"span"),e.EFF(5),e.k0s()(),e.DNE(6,v,3,0,"ion-button",2),e.k0s(),e.j41(7,"ion-list",3),e.DNE(8,k,23,11,"ion-item",4),e.k0s()()()),2&i&&(e.R7$(5),e.SpI("Add New ",n.vendorDeatil?n.vendorDeatil.serviceLabel:"Service",""),e.R7$(1),e.Y8G("ngIf","Front Desk"===(null==n.user?null:n.user.name)),e.R7$(2),e.Y8G("ngForOf",n.userShops))},dependencies:[c.Sq,c.bT,a.Jm,a.hU,a.W9,a.lO,a.uz,a.he,a.nf,a.ln,a.N7,l.Wk,f.h],styles:[".v-divider[_ngcontent-%COMP%]{width:1px!important;padding:0;font-size:1px;flex:none;max-width:1px!important;border-right:1px solid #dcdcdc}.pay-now-btn-fill[_ngcontent-%COMP%]{--background: #1a8cd2;--color: white}"]})}}return s})()}];let U=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[l.iI.forChild(F),l.iI]})}}return s})();var D=o(5553);let j=(()=>{class s{static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[c.MD,d.YN,a.bv,D.h,U]})}}return s})()}}]);